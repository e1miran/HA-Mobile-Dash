button_card_templates:
  homey:
    tap_action:
      action: toggle
    hold_action:
      action: more-info
    show_label: false
    show_state: true
    state:
      - value: 'on'
        styles:
          card:
            - background: rgba(253, 191, 96, 0.4)
            - font-family: var(--primary-font-family) !important
      - value: 'off'
        styles:
          card:
            - background: rgba(234, 238, 246,0.4)
            - font-family: var(--primary-font-family) !important
    styles:
      icon:
        - width: 1.7em
      img_cell:
        - justify-self: start
        - width: 2em
        - height: 2em
      name:
        - justify-self: start
        - font-size: 0.8em
        - font-weight: 500
      label:
        - justify-self: start
        - font-size: 0.8em
        - font-weight: 300
      state:
        - justify-self: start
        - font-size: 0.8em
        - font-weight: 300
      card:
        - padding: 5px 10px 10px 10px
        - height: 100%
        - border: 1px solid rgba(0,0,0,0.1)
        - font-family: var(--primary-font-family) !important
decluttering_templates:
  camera_view_template:
    card:
      type: grid
      columns: 1
      square: false
      cards:
        - type: conditional
          conditions:
            - condition: state
              entity: '[[motion_entity]]'
              state_not: unavailable
            - condition: state
              entity: camera.[[camera_entity2]]
              state_not: unavailable
          card:
            camera_view: live
            type: picture-glance
            entities: []
            camera_image: camera.[[camera_entity2]]
            aspect_ratio: '4:3'
            card_mod:
              style: |
                ha-card {
                  font-family: var(--primary-font-family) !important;
                  background: rgba(234, 238, 246,0.4);
                  border: 1px solid rgba(0,0,0,0.1) !important;
                }
                .title {
                  color: rgb(184, 17, 17);
                  font-size: 1.2em;
                  font-weight: bold !important;
                }
                .box {
                  background: transparent !important;
                }
        - type: conditional
          conditions:
            - condition: state
              entity: '[[motion_entity]]'
              state: unavailable
          card:
            camera_view: live
            type: picture-glance
            entities: []
            camera_image: camera.[[camera_entity2]]
            aspect_ratio: '4:3'
            card_mod:
              style: |
                ha-card {
                  background: rgba(234, 238, 246,0.4);
                  border: 1px solid rgba(0,0,0,0.1) !important;
                  font-family: var(--primary-font-family) !important;
                }
                .box {
                  background: transparent !important;
                }
  person_card_new:
    default:
      - size: 60%
      - color: auto
      - variable: spin
      - spin: false
      - show_name: false
      - show_state: false
      - show_label: false
      - show_icon: true
      - show_last_changed: false
      - show_entity_picture: false
      - tap_action:
          action: more-info
          haptic: light
      - aspect_ratio: 2/1
      - margin-right: 20px
      - label: '&nbsp;'
      - off_icon_color: gray
      - off_name_color: gray
      - off_state_color: gray
    card:
      type: custom:button-card
      battery: '[[battery]]'
      home_sensor: '[[home_sensor]]'
      person: '[[person]]'
      name: '[[name]]'
      size: '[[size]]'
      color: '[[color]]'
      aspect_ratio: '[[aspect_ratio]]'
      entity: person.[[person]]
      icon: mdi:[[icon]]
      label: '[[label]]'
      show_name: '[[show_name]]'
      show_icon: '[[show_icon]]'
      show_state: '[[show_state]]'
      show_label: '[[show_label]]'
      show_last_changed: '[[show_last_changed]]'
      tap_action: '[[tap_action]]'
      hold_action: '[[hold_action]]'
      entity_picture: '[[entity_picture]]'
      show_entity_picture: '[[show_entity_picture]]'
      styles:
        card:
          - border-radius: 12px
          - border: 1px solid rgba(0,0,0,0.1)
          - font-family: var(--primary-font-family) !important
        icon:
          - grid-column: 1
          - grid-row: 1 / 3
        label:
          - color: gray
          - font-size: 1em
          - padding: 0px 10px
          - justify-self: start
        state:
          - font-size: 1em
          - padding: 0px 10px
          - justify-self: start
          - text-transform: capitalize
          - font-weight: normal
          - padding-left: 10px
        grid:
          - grid-template-areas: '"i ss" "i battery" "i home" "loc loc"'
          - grid-template-columns: 40% 60%
          - grid-template-rows: 25% 25% 25% 25%
        img_cell:
          - align-self: start
          - text-align: start
        name:
          - justify-self: start
          - padding-left: 10px
          - font-weight: bold
          - font-size: 13px
        entity_picture:
          - height: 50px
          - width: 50px
          - border-radius: 100%
        custom_fields:
          battery:
            - align-self: start
            - justify-self: start
            - font-size: 0.7em
          home:
            - align-self: start
            - justify-self: start
            - font-size: 0.7em
      custom_fields:
        ss: |
          [[[
            if (states['person.[[person]]'].state === 'home')
              return `<span>Home</span>`
            else
              return `<span>Away</span>`
          ]]]
        battery: |
          [[[
              return `<ha-icon
                icon="mdi:battery"
                style="; --mdc-icon-size: 1em; padding-left: 6px; padding-right: 5px;">
                </ha-icon><span>${states['sensor.ic3_[[person]]_iphone_battery'].state}%</span>`
          ]]]
        home: |
          [[[
            if (states['person.[[person]]'].state === 'home')
              return `<ha-icon
                icon="mdi:home-import-outline"
                style="; --mdc-icon-size: 1em; padding-left: 6px; padding-right: 5px;">
                </ha-icon><span>0 mi</span>`
            else
              return `<ha-icon
                icon="mdi:home-import-outline"
                style="; --mdc-icon-size: 1em; padding-left: 6px; padding-right: 5px;">
                </ha-icon><span>${Math.round(states['sensor.ic3_[[person]]_iphone_home_distance'].state)} mi</span>`
          ]]]
        loc: |
          [[[
            if (states['person.[[person]]'].state != 'home')
              return `<span style="font-size:0.6em">${states['sensor.ic3_[[person]]_iphone_location'].attributes.street}</span>`
            else
              return `<span style="font-size:0.6em">Riva Ridge Drive</span>`
          ]]]
title: Home
kiosk_mode:
  mobile_settings:
    hide_header: true
    ignore_entity_settings: true
    custom_width: 768
  user_settings:
    - users:
        - MirandaCams
      hide_sidebar: true
      hide_header: true
views:
  - title: Home
    visible:
      - user: ef8551138df645acab3b193b2dd7884c
      - user: be77752d871b4b8fa18df6e3ea7cf641
      - user: adafc39c4733451fa975858c65f4d7ce
      - user: d5bd3c44e884450aacbaf0a76762573b
      - user: 4238b36f818745d7a1c1b8f8ca9a6ff3
    subview: false
    theme: macOS Theme
    cards:
      - type: vertical-stack
        cards:
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                name: >
                  [[[ return states['sensor.day'].state + ", " +
                  states['sensor.date'].state ]]]
                label: |
                  [[[ return states['sensor.time'].state ]]]
                show_label: true
                styles:
                  grid:
                    - grid-template-areas: '"n" "l"'
                  card:
                    - background: none
                    - padding-left: 8px
                    - top: '-20px'
                    - margin-bottom: '-25px'
                    - font-family: var(--primary-font-family) !important
                  name:
                    - justify-self: start
                    - font-size: 14px
                  label:
                    - justify-self: start
                    - font-size: 26px
                    - font-weight: 500
              - type: custom:button-card
                name: >
                  [[[ return "House " +
                  Math.round(states['sensor.main_floor_current_temperature_2'].state)
                  + "°F" ]]]
                label: >
                  [[[ return
                  states['weather.metno'].attributes.temperature           +
                  '<span style="font-size:0.6em">°F</span>' ]]]
                show_label: true
                custom_fields:
                  icon: |
                    [[[
                      var weather = states['weather.metno'].state;
                      if (weather != "unknown")
                        return '<img src = "/local/weather_icons/' + weather + '.svg" width="50" height="50" />'
                      else
                        return '<span> </span>'
                    ]]] 
                styles:
                  grid:
                    - grid-template-areas: '"icon n" "icon l"'
                  card:
                    - background: none
                    - padding-right: 8px
                    - top: '-20px'
                    - margin-bottom: '-25px'
                    - font-family: var(--primary-font-family) !important
                  name:
                    - justify-self: end
                    - font-size: 12px
                  label:
                    - justify-self: end
                    - font-size: 26px
                    - font-weight: 500
                  custom_fields:
                    icon:
                      - justify-self: end;
                      - align-self: end;
                      - padding-right: 10px
                      - margin-bottom: '-11px'
            columns: 2
          - type: vertical-stack
            cards:
              - square: false
                type: grid
                cards:
                  - type: custom:button-card
                    color_type: blank-card
                  - type: custom:button-card
                    name: Garage Door
                    layout: icon_name
                    entity: cover.garage_door
                    tap_action:
                      action: call-service
                      service: cover.toggle
                      service_data:
                        entity_id: cover.garage_door
                      confirmation:
                        text: |
                          [[[
                            if (states['cover.garage_door'].state == "open")
                              return "Are you sure you'd like to close the garage door?";
                            else if (states['cover.garage_door'].state == "closed")
                              return "Are you sure you'd like to open the garage door?";
                            else
                              return "Are you sure you'd like to stop the garage door?";
                          ]]]
                    hold_action:
                      action: more-info
                    styles:
                      grid:
                        - grid-template-areas: '"i n"'
                        - grid-template-columns: 36px 1fr
                        - grid-template-rows: 1fr
                      card:
                        - height: 30px
                        - background: null
                        - font-family: var(--primary-font-family) !important
                      name:
                        - justify-self: center
                        - font-size: 12px
                        - font-weight: 500
                        - margin-left: '-22px'
                      icon:
                        - width: 20px
                        - padding: 0 2px
                        - color: |
                            [[[ 
                              if (states['cover.garage_door'].state == "open")
                                return "rgba(255, 204, 110,1.0)";
                            ]]]
                columns: 3
              - square: false
                type: grid
                cards:
                  - type: custom:button-card
                    name: Security
                    icon: mdi:shield
                    layout: icon_name
                    tap_action:
                      action: fire-dom-event
                      local_conditional_card:
                        action: set
                        ids:
                          - tabs1: show
                          - tabs2: hide
                          - tabs3: hide
                    styles:
                      grid:
                        - grid-template-areas: '"i n"'
                        - grid-template-columns: 36px 1fr
                        - grid-template-rows: 1fr
                      card:
                        - height: 30px
                        - background: null
                        - font-family: var(--primary-font-family) !important
                      name:
                        - justify-self: center
                        - font-size: 12px
                        - font-weight: 500
                        - margin-left: '-32px'
                      icon:
                        - width: 20px
                        - padding: 0 2px
                        - color: |
                            [[[ 
                              if (states['alarm_control_panel.abode_alarm'].state == "disarmed")
                                return "rgba(166, 207, 152, 1)";
                              return "rgba(230, 0, 0,0.7)";
                            ]]] 
                  - type: custom:button-card
                    name: Home
                    icon: mdi:home
                    layout: icon_name
                    tap_action:
                      action: fire-dom-event
                      local_conditional_card:
                        action: set
                        ids:
                          - tabs1: hide
                          - tabs2: show
                          - tabs3: hide
                    styles:
                      grid:
                        - grid-template-areas: '"i n"'
                        - grid-template-columns: 36px 1fr
                        - grid-template-rows: 1fr
                      card:
                        - height: 30px
                        - background: null
                        - font-family: var(--primary-font-family) !important
                      name:
                        - justify-self: center
                        - font-size: 12px
                        - font-weight: 500
                        - margin-left: '-32px'
                      icon:
                        - width: 20px
                        - padding: 0 2px
                        - color: rgb(104, 149, 210)
                  - type: custom:button-card
                    name: Cameras
                    icon: mdi:cctv
                    layout: icon_name
                    tap_action:
                      action: fire-dom-event
                      local_conditional_card:
                        action: set
                        ids:
                          - tabs1: hide
                          - tabs2: hide
                          - tabs3: show
                    styles:
                      grid:
                        - grid-template-areas: '"i n"'
                        - grid-template-columns: 36px 1fr
                        - grid-template-rows: 1fr
                      card:
                        - height: 30px
                        - background: null
                        - font-family: var(--primary-font-family) !important
                      name:
                        - justify-self: center
                        - font-size: 12px
                        - font-weight: 500
                        - margin-left: '-32px'
                      icon:
                        - width: 20px
                        - padding: 0 2px
                        - color: rgb(251, 168, 52)
                columns: 3
              - type: custom:local-conditional-card
                id: tabs1
                default: hide
                card:
                  square: false
                  type: grid
                  cards:
                    - square: false
                      type: grid
                      cards:
                        - type: custom:button-card
                          styles:
                            card:
                              - height: 30px
                              - border: 2px solid silver
                              - margin-top: '-38px'
                              - background: none
                              - font-family: var(--primary-font-family) !important
                        - type: custom:button-card
                          styles:
                            card:
                              - height: 0px
                              - padding: 0px
                              - background: none
                              - font-family: var(--primary-font-family) !important
                        - type: custom:button-card
                          styles:
                            card:
                              - height: 0px
                              - padding: 0px
                              - background: none
                              - font-family: var(--primary-font-family) !important
                      columns: 3
                    - square: false
                      type: grid
                      cards:
                        - type: custom:button-card
                          template: homey
                          entity: alarm_control_panel.abode_alarm
                          name: Alarm
                          icon: mdi:shield-home-outline
                          tap_action:
                            action: call-service
                            service: |
                              [[[
                                if (states['alarm_control_panel.abode_alarm'].state == "disarmed")
                                  return "alarm_control_panel.alarm_arm_home";
                                return "alarm_control_panel.alarm_disarm";
                              ]]]
                            service_data:
                              entity_id: alarm_control_panel.abode_alarm
                              code: 1914
                          styles:
                            icon:
                              - color: |
                                  [[[
                                    if (states['alarm_control_panel.abode_alarm'].state == "disarmed")
                                      return "rgba(166, 207, 152, 1)";
                                    return "rgba(230, 0, 0,0.7)";
                                  ]]]
                        - type: custom:button-card
                          template: homey
                          name: Front Lock
                          entity: lock.front_door_lock
                          styles:
                            icon:
                              - color: |
                                  [[[
                                    if (states['lock.front_door_lock'].state == "unlocked")
                                      return "rgba(24, 199, 71,1)";
                                    if (states['lock.front_door_lock'].state == "locked")
                                      return "rgba(230, 0, 0,0.7)";
                                  ]]]
                        - type: custom:button-card
                          template: homey
                          name: Rear Lock
                          entity: lock.rear_door_lock
                          styles:
                            icon:
                              - color: |
                                  [[[
                                    if (states['lock.rear_door_lock'].state == "unlocked")
                                      return "rgba(24, 199, 71,1)";
                                    if (states['lock.rear_door_lock'].state == "locked")
                                      return "rgba(230, 0, 0,0.7)";
                                  ]]]
                      columns: 3
                    - type: markdown
                      content: Alarm Sensors
                      card_mod:
                        style: |
                          ha-card {
                            font-weight: 500; 
                            font-size: 1.2em;
                            background: transparent !important;
                            font-family: var(--primary-font-family) !important;
                          }
                          ha-markdown.no-header {
                            padding: 0px 8px;      
                          }
                    - type: entities
                      entities:
                        - entity: binary_sensor.entry_front
                        - entity: binary_sensor.entry_garage
                        - entity: binary_sensor.entry_lanai
                        - entity: binary_sensor.entry_rear
                        - entity: binary_sensor.aqara_gate_front
                          name: Gate - Front
                        - entity: binary_sensor.aqara_gate_back
                          name: Gate - Back
                        - entity: binary_sensor.motion_family_rm
                        - entity: binary_sensor.slider_front_rm
                        - entity: binary_sensor.slider_master
                        - entity: binary_sensor.slider_family_rm
                        - entity: binary_sensor.slider_lanai
                        - entity: binary_sensor.window_office
                          name: Window - Theater
                        - entity: binary_sensor.window_master_bath
                        - entity: binary_sensor.window_laundry
                        - entity: binary_sensor.window_josh
                          name: Window - Office
                        - entity: binary_sensor.window_guest
                        - entity: binary_sensor.window_cosmo
                      state_color: false
                      card_mod:
                        style: |
                          ha-card {
                            border-radius: 12px;
                            font-family: var(--primary-font-family) !important;
                          }
                    - type: markdown
                      content: Occupancy Sensors
                      card_mod:
                        style: |
                          ha-card {
                            font-weight: 500; 
                            font-size: 1.2em;
                            background: transparent !important;
                            font-family: var(--primary-font-family) !important;
                          }
                          ha-markdown.no-header {
                            padding: 0px 8px;      
                          }
                    - type: entities
                      entities:
                        - entity: binary_sensor.theater_occupancy
                        - entity: binary_sensor.front_living_rm
                        - entity: binary_sensor.master_2
                        - entity: binary_sensor.family_room_2
                        - entity: binary_sensor.office_2
                        - entity: binary_sensor.guest_occupancy_2
                        - entity: binary_sensor.cosmo_occupancy_2
                        - entity: binary_sensor.upstairs_2
                      state_color: false
                      card_mod:
                        style: |
                          ha-card {
                            border-radius: 12px;
                            font-family: var(--primary-font-family) !important;
                          }
                  columns: 1
              - type: custom:local-conditional-card
                id: tabs2
                default: show
                card:
                  square: false
                  type: grid
                  cards:
                    - square: false
                      type: grid
                      cards:
                        - type: custom:button-card
                          color_type: blank-card
                        - type: custom:button-card
                          name: Presence
                          icon: |
                            [[[
                              if (states['group.occupancy'].state == "home")
                                return "mdi:account";
                              return "mdi:account-cancel";
                            ]]]
                          layout: icon_name
                          tap_action:
                            action: navigate
                            navigation_path: '#presence-card'
                          styles:
                            grid:
                              - grid-template-areas: '"i n"'
                              - grid-template-columns: 36px 1fr
                              - grid-template-rows: 1fr
                            card:
                              - height: 30px
                              - background: null
                              - font-family: var(--primary-font-family) !important
                            name:
                              - justify-self: center
                              - font-size: 12px
                              - font-weight: 500
                              - margin-left: '-32px'
                            icon:
                              - width: 20px
                              - padding: 0 2px
                              - color: |
                                  [[[ 
                                    if (states['group.occupancy'].state == "not_home")
                                      return "rgba(230, 0, 0,0.7)";
                                  ]]]
                        - type: custom:button-card
                          color_type: blank-card
                      columns: 3
                    - square: false
                      type: grid
                      cards:
                        - square: false
                          type: grid
                          cards:
                            - type: custom:button-card
                              name: Family Room
                              icon: mdi:sofa
                              custom_fields:
                                temp: >
                                  [[[ return
                                  Math.round(states['sensor.family_room_temperature'].state)
                                  + '°F' ]]]    
                                hum: >
                                  [[[ return 'H' +
                                  Math.round(states['sensor.main_floor_current_humidity'].state)
                                  + '%' ]]]
                                btn1:
                                  card:
                                    type: custom:mushroom-chips-card
                                    chips:
                                      - type: template
                                        icon: mdi:fan
                                        tap_action:
                                          action: toggle
                                        entity: fan.familyroom_fan
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(138, 205, 215, 0.3);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('fan.familyroom_fan','on') else 'none' }};
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              margin-bottom: 4px;
                                              font-family: var(--primary-font-family) !important;
                                            }    
                                      - type: template
                                        icon: mdi:wall-sconce-round
                                        tap_action:
                                          action: toggle
                                        entity: light.familyroom_fan
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(166, 207, 152, 0.3);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('light.familyroom_fan','on') else 'none' }};
                                              border: 1px solid rgba(0,0,0,0.02)!important;
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              margin-bottom: 4px;
                                              font-family: var(--primary-font-family) !important;
                                            }  
                                      - type: template
                                        icon: mdi:vacuum
                                        tap_action:
                                          confirmation:
                                            text: >-
                                              Are you sure you want to send K.I.T.T.
                                              to the family room?
                                          action: toggle
                                        entity: input_button.vacuum_familyroom
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(112, 119, 161, 0.6);
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              margin-bottom: 4px;
                                              font-family: var(--primary-font-family) !important;
                                            }  
                                btn2:
                                  card:
                                    type: custom:mushroom-chips-card
                                    chips:
                                      - type: template
                                        icon: mdi:floor-lamp-dual
                                        tap_action:
                                          action: toggle
                                        entity: light.corner_lamp
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(223, 130, 108, 0.3);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('light.corner_lamp','on') else 'none' }};
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              margin-bottom: 4px;
                                              font-family: var(--primary-font-family) !important;
                                            }  
                                      - type: template
                                        icon: mdi:floor-lamp
                                        tap_action:
                                          action: toggle
                                        entity: light.tower_lamps
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(129, 104, 157, 0.3);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('light.tower_lamps','on') else 'none' }};
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              margin-bottom: 4px;
                                              font-family: var(--primary-font-family) !important;
                                            }    
                                      - type: template
                                        icon: mdi:remote-tv
                                        tap_action:
                                          action: navigate
                                          navigation_path: '#rem-family-tv'
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(255, 207, 150, 0.5);
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              margin-bottom: 4px;
                                              font-family: var(--primary-font-family) !important;
                                            }     
                                             
                              styles:
                                grid:
                                  - grid-template-areas: >-
                                      "n n n" "temp btn1 btn2" "hum btn1 btn2"
                                      "i btn1 btn2"
                                  - grid-template-columns: 1fr min-content min-content
                                  - grid-template-rows: min-content min-content min-content 1fr
                                card:
                                  - padding: 15px 8px 22px 15px
                                  - height: 280px
                                  - font-family: var(--primary-font-family) !important
                                custom_fields:
                                  temp:
                                    - justify-self: start
                                    - font-size: 14px
                                    - opacity: '0.7'
                                    - padding-top: 10px
                                  hum:
                                    - justify-self: start
                                    - font-size: 14px
                                    - opacity: '0.7'
                                  btn1:
                                    - justify-content: end
                                    - align-self: start
                                  btn2:
                                    - justify-content: end
                                    - align-self: start
                                    - padding-left: 6px
                                name:
                                  - justify-self: start
                                  - font-size: 1em
                                  - font-weight: 400
                                  - height: 30px
                                img_cell:
                                  - justify-content: start
                                  - position: absolute
                                  - width: 95px
                                  - height: 95px
                                  - left: 0
                                  - bottom: 0
                                  - margin: 0 0 -20px -20px
                                  - background: '#FFC47E'
                                  - border-radius: 500px
                                icon:
                                  - position: relative
                                  - width: 85px
                                  - color: black
                                  - opacity: '0.5'
                            - type: custom:button-card
                              name: Kitchen
                              icon: mdi:silverware-variant
                              custom_fields:
                                temp: >
                                  [[[ return
                                  Math.round(states['sensor.main_floor_current_temperature_2'].state)
                                  + '°F' ]]]    
                                hum: >
                                  [[[ return 'H' +
                                  Math.round(states['sensor.main_floor_current_humidity'].state)
                                  + '%' ]]]
                                btn1:
                                  card:
                                    type: custom:mushroom-chips-card
                                    chips:
                                      - type: template
                                        icon: mdi:wall-sconce-round
                                        tap_action:
                                          action: toggle
                                        entity: light.kitchen
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(138, 205, 215, 0.3);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('light.kitchen','on') else 'none' }};
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              margin-bottom: 4px;
                                              font-family: var(--primary-font-family) !important;
                                            }    
                                      - type: template
                                        icon: mdi:wall-sconce-round
                                        tap_action:
                                          action: toggle
                                        entity: light.kitchen_table
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(166, 207, 152, 0.3);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('light.kitchen_table','on') else 'none' }};
                                              border: 1px solid rgba(0,0,0,0.02)!important;
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              margin-bottom: 4px;
                                              font-family: var(--primary-font-family) !important;
                                            }  
                                btn2:
                                  card:
                                    type: custom:mushroom-chips-card
                                    chips:
                                      - type: template
                                        icon: mdi:wall-sconce-flat-variant
                                        tap_action:
                                          action: toggle
                                        entity: light.cabinets_top
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(223, 130, 108, 0.3);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('light.cabinets_top','on') else 'none' }};
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              margin-bottom: 4px;
                                              font-family: var(--primary-font-family) !important;
                                            }  
                                      - type: template
                                        icon: mdi:wall-sconce-flat
                                        tap_action:
                                          action: toggle
                                        entity: light.cabinets_btm
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(129, 104, 157, 0.3);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('light.cabinets_btm','on') else 'none' }};
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              margin-bottom: 4px;
                                              font-family: var(--primary-font-family) !important;
                                            }  
                                      - type: template
                                        icon: mdi:coffee
                                        tap_action:
                                          action: toggle
                                        entity: switch.ewelink_001_switch
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(255, 207, 150, 0.5);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('switch.ewelink_001_switch','on') else 'none' }};
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              margin-bottom: 4px;
                                              font-family: var(--primary-font-family) !important;
                                            }
                                             
                              styles:
                                grid:
                                  - grid-template-areas: >-
                                      "n n n" "temp btn1 btn2" "hum btn1 btn2"
                                      "i btn1 btn2"
                                  - grid-template-columns: 1fr min-content min-content
                                  - grid-template-rows: min-content min-content min-content 1fr
                                card:
                                  - padding: 15px 8px 22px 15px
                                  - height: 280px
                                  - font-family: var(--primary-font-family) !important
                                custom_fields:
                                  temp:
                                    - justify-self: start
                                    - font-size: 14px
                                    - opacity: '0.7'
                                    - padding-top: 10px
                                  hum:
                                    - justify-self: start
                                    - font-size: 14px
                                    - opacity: '0.7'
                                  btn1:
                                    - justify-content: end
                                    - align-self: start
                                  btn2:
                                    - justify-content: end
                                    - align-self: start
                                    - padding-left: 6px
                                name:
                                  - justify-self: start
                                  - font-size: 1em
                                  - font-weight: 400
                                  - height: 30px
                                img_cell:
                                  - justify-content: start
                                  - position: absolute
                                  - width: 95px
                                  - height: 95px
                                  - left: 0
                                  - bottom: 0
                                  - margin: 0 0 -20px -20px
                                  - background: '#FFC47E'
                                  - border-radius: 500px
                                icon:
                                  - position: relative
                                  - width: 85px
                                  - color: black
                                  - opacity: '0.5'
                          columns: 2
                      columns: 1
                    - type: grid
                      square: false
                      columns: 2
                      cards:
                        - type: custom:button-card
                          name: Theater
                          icon: mdi:theater
                          entity: sensor.theater_temperature
                          state_display: >-
                            [[[ return
                            Math.round(states['sensor.theater_temperature'].state)
                            + '°F' ]]]
                          custom_fields:
                            arrow: |
                              [[[
                                return `<ha-icon
                                  icon="mdi:chevron-up"
                                  style="width:16px; height: 16px;">
                                  </ha-icon>`
                              ]]]  
                          tap_action:
                            action: navigate
                            navigation_path: '#theater-card'
                          show_label: false
                          show_state: 'yes'
                          styles:
                            grid:
                              - grid-template-areas: '"i n arrow" "i s arrow"'
                              - grid-template-columns: 60px 1fr 40px
                            icon:
                              - width: 24px
                              - color: black
                            img_cell:
                              - background: '#C1D8C3'
                              - border-radius: 515px
                              - width: 50px
                              - height: 50px
                            name:
                              - justify-self: start
                              - font-size: 14px
                              - font-weight: 500
                              - padding-left: 10px
                            card:
                              - margin: 0
                              - border-radius: 50px
                              - padding: 12px 14px 12px 8px
                              - font-family: var(--primary-font-family) !important
                            state:
                              - justify-self: start
                              - font-size: 14px
                              - padding-left: 10px
                            custom_fields:
                              arrow:
                                - justify-self: end
                                - font-size: 14px
                                - color: black
                                - opacity: '0.7'
                        - type: custom:button-card
                          name: Exterior
                          icon: mdi:home-export-outline
                          entity: weather.metno
                          custom_fields:
                            arrow: |
                              [[[
                                return `<ha-icon
                                  icon="mdi:chevron-up"
                                  style="width:16px; height: 16px;">
                                  </ha-icon>`
                              ]]]  
                          tap_action:
                            action: navigate
                            navigation_path: '#ext-card'
                          show_label: false
                          show_state: true
                          styles:
                            grid:
                              - grid-template-areas: '"i n arrow" "i s arrow"'
                              - grid-template-columns: 60px 1fr 40px
                            icon:
                              - width: 24px
                              - color: black
                            img_cell:
                              - background: '#F1B4BB'
                              - border-radius: 515px
                              - width: 50px
                              - height: 50px
                            name:
                              - justify-self: start
                              - font-size: 14px
                              - font-weight: 500
                              - padding-left: 10px
                            card:
                              - margin: 0
                              - border-radius: 50px
                              - padding: 12px 14px 12px 8px
                              - font-family: var(--primary-font-family) !important
                            state:
                              - justify-self: start
                              - font-size: 14px
                              - padding-left: 10px
                            custom_fields:
                              arrow:
                                - justify-self: end
                                - font-size: 14px
                                - color: black
                                - opacity: '0.7'
                        - type: conditional
                          conditions:
                            - condition: user
                              users:
                                - ef8551138df645acab3b193b2dd7884c
                                - be77752d871b4b8fa18df6e3ea7cf641
                          card:
                            type: custom:button-card
                            name: Master
                            icon: mdi:bed-king
                            entity: sensor.master_temperature
                            state_display: >-
                              [[[ return
                              Math.round(states['sensor.master_temperature'].state)
                              + '°F' ]]]
                            custom_fields:
                              arrow: |
                                [[[
                                  return `<ha-icon
                                    icon="mdi:chevron-up"
                                    style="width:16px; height: 16px;">
                                    </ha-icon>`
                                ]]]  
                            tap_action:
                              action: navigate
                              navigation_path: '#master-card'
                            show_label: false
                            show_state: true
                            styles:
                              grid:
                                - grid-template-areas: '"i n arrow" "i s arrow"'
                                - grid-template-columns: 60px 1fr 40px
                              icon:
                                - width: 24px
                                - color: black
                              img_cell:
                                - background: '#FFCF96'
                                - border-radius: 515px
                                - width: 50px
                                - height: 50px
                              name:
                                - justify-self: start
                                - font-size: 14px
                                - font-weight: 500
                                - padding-left: 10px
                              card:
                                - margin: 0
                                - border-radius: 50px
                                - padding: 12px 14px 12px 8px
                                - font-family: var(--primary-font-family) !important
                              state:
                                - justify-self: start
                                - font-size: 14px
                                - padding-left: 10px
                              custom_fields:
                                arrow:
                                  - justify-self: end
                                  - font-size: 14px
                                  - color: black
                                  - opacity: '0.7'
                        - type: conditional
                          conditions:
                            - condition: user
                              users:
                                - be77752d871b4b8fa18df6e3ea7cf641
                                - ef8551138df645acab3b193b2dd7884c
                          card:
                            type: custom:button-card
                            name: Office
                            icon: mdi:desk
                            entity: sensor.office_temperature
                            state_display: >-
                              [[[ return
                              Math.round(states['sensor.office_temperature'].state)
                              + '°F' ]]]
                            custom_fields:
                              arrow: |
                                [[[
                                  return `<ha-icon
                                    icon="mdi:chevron-up"
                                    style="width:16px; height: 16px;">
                                    </ha-icon>`
                                ]]]  
                            tap_action:
                              action: navigate
                              navigation_path: '#office-card'
                            show_label: false
                            show_state: true
                            styles:
                              grid:
                                - grid-template-areas: '"i n arrow" "i s arrow"'
                                - grid-template-columns: 60px 1fr 40px
                              icon:
                                - width: 24px
                                - color: black
                              img_cell:
                                - background: '#D2E0FB'
                                - border-radius: 515px
                                - width: 50px
                                - height: 50px
                              name:
                                - justify-self: start
                                - font-size: 14px
                                - font-weight: 500
                                - padding-left: 10px
                              card:
                                - margin: 0
                                - border-radius: 50px
                                - padding: 12px 14px 12px 8px
                                - font-family: var(--primary-font-family) !important
                              state:
                                - justify-self: start
                                - font-size: 14px
                                - padding-left: 10px
                              custom_fields:
                                arrow:
                                  - justify-self: end
                                  - font-size: 14px
                                  - color: black
                                  - opacity: '0.7'
                        - type: custom:button-card
                          name: Vacuum
                          icon: mdi:robot-vacuum
                          entity: vacuum.k_i_t_t
                          custom_fields:
                            arrow: |
                              [[[
                                return `<ha-icon
                                  icon="mdi:chevron-up"
                                  style="width:16px; height: 16px;">
                                  </ha-icon>`
                              ]]]  
                          tap_action:
                            action: navigate
                            navigation_path: '#vac-card'
                          show_label: false
                          show_state: true
                          styles:
                            grid:
                              - grid-template-areas: '"i n arrow" "i s arrow"'
                              - grid-template-columns: 60px 1fr 40px
                            icon:
                              - width: 24px
                              - color: black
                            img_cell:
                              - background: '#EDB7ED'
                              - border-radius: 515px
                              - width: 50px
                              - height: 50px
                            name:
                              - justify-self: start
                              - font-size: 14px
                              - font-weight: 500
                              - padding-left: 10px
                            card:
                              - margin: 0
                              - border-radius: 50px
                              - padding: 12px 14px 12px 8px
                              - font-family: var(--primary-font-family) !important
                            state:
                              - justify-self: start
                              - font-size: 14px
                              - padding-left: 10px
                            custom_fields:
                              arrow:
                                - justify-self: end
                                - font-size: 14px
                                - color: black
                                - opacity: '0.7'
                        - type: custom:button-card
                          name: HVAC
                          icon: mdi:air-conditioner
                          entity: sensor.main_floor_current_temperature_2
                          state_display: >-
                            [[[ return
                            Math.round(states['sensor.main_floor_current_temp'].state)
                            + '°F' ]]]
                          custom_fields:
                            arrow: |
                              [[[
                                return `<ha-icon
                                  icon="mdi:chevron-up"
                                  style="width:16px; height: 16px;">
                                  </ha-icon>`
                              ]]]  
                          tap_action:
                            action: navigate
                            navigation_path: '#hvac-card'
                          show_label: false
                          show_state: true
                          styles:
                            grid:
                              - grid-template-areas: '"i n arrow" "i s arrow"'
                              - grid-template-columns: 60px 1fr 40px
                            icon:
                              - width: 24px
                              - color: black
                            img_cell:
                              - background: '#EF9595'
                              - border-radius: 515px
                              - width: 50px
                              - height: 50px
                            name:
                              - justify-self: start
                              - font-size: 14px
                              - font-weight: 500
                              - padding-left: 10px
                            card:
                              - margin: 0
                              - border-radius: 50px
                              - padding: 12px 14px 12px 8px
                              - font-family: var(--primary-font-family) !important
                            state:
                              - justify-self: start
                              - font-size: 14px
                              - padding-left: 10px
                            custom_fields:
                              arrow:
                                - justify-self: end
                                - font-size: 14px
                                - color: black
                                - opacity: '0.7'
                        - type: conditional
                          conditions:
                            - condition: user
                              users:
                                - ef8551138df645acab3b193b2dd7884c
                                - be77752d871b4b8fa18df6e3ea7cf641
                                - adafc39c4733451fa975858c65f4d7ce
                          card:
                            type: custom:button-card
                            name: Jarvis
                            icon: mdi:car-sports
                            entity: sensor.jarvis_battery_level
                            custom_fields:
                              arrow: |
                                [[[
                                  return `<ha-icon
                                    icon="mdi:chevron-up"
                                    style="width:16px; height: 16px;">
                                    </ha-icon>`
                                ]]]  
                            tap_action:
                              action: navigate
                              navigation_path: '#car-card'
                            show_label: false
                            show_state: true
                            styles:
                              grid:
                                - grid-template-areas: '"i n arrow" "i s arrow"'
                                - grid-template-columns: 60px 1fr 40px
                              icon:
                                - width: 24px
                                - color: black
                              img_cell:
                                - background: '#FFCF96'
                                - border-radius: 515px
                                - width: 50px
                                - height: 50px
                              name:
                                - justify-self: start
                                - font-size: 14px
                                - font-weight: 500
                                - padding-left: 10px
                              card:
                                - margin: 0
                                - border-radius: 50px
                                - padding: 12px 14px 12px 8px
                                - font-family: var(--primary-font-family) !important
                              state:
                                - justify-self: start
                                - font-size: 14px
                                - padding-left: 10px
                              custom_fields:
                                arrow:
                                  - justify-self: end
                                  - font-size: 14px
                                  - color: black
                                  - opacity: '0.7'
                        - type: conditional
                          conditions:
                            - condition: user
                              users:
                                - be77752d871b4b8fa18df6e3ea7cf641
                                - adafc39c4733451fa975858c65f4d7ce
                                - ef8551138df645acab3b193b2dd7884c
                          card:
                            type: custom:button-card
                            name: Sports
                            icon: mdi:football
                            custom_fields:
                              arrow: |
                                [[[
                                  return `<ha-icon
                                    icon="mdi:chevron-up"
                                    style="width:16px; height: 16px;">
                                    </ha-icon>`
                                ]]]  
                            tap_action:
                              action: navigate
                              navigation_path: '#sports-card'
                            show_label: false
                            show_state: true
                            styles:
                              grid:
                                - grid-template-areas: '"i n arrow" "i s arrow"'
                                - grid-template-columns: 60px 1fr 40px
                              icon:
                                - width: 24px
                                - color: black
                              img_cell:
                                - background: '#D1C9D9'
                                - border-radius: 515px
                                - width: 50px
                                - height: 50px
                              name:
                                - justify-self: start
                                - font-size: 14px
                                - font-weight: 500
                                - padding-left: 10px
                              card:
                                - margin: 0
                                - border-radius: 50px
                                - padding: 12px 14px 12px 8px
                                - font-family: var(--primary-font-family) !important
                              state:
                                - justify-self: start
                                - font-size: 14px
                                - padding-left: 10px
                              custom_fields:
                                arrow:
                                  - justify-self: end
                                  - font-size: 14px
                                  - color: black
                                  - opacity: '0.7'
                        - type: conditional
                          conditions:
                            - condition: user
                              users:
                                - ef8551138df645acab3b193b2dd7884c
                          card:
                            type: custom:button-card
                            name: Admin
                            icon: mdi:cog
                            custom_fields:
                              arrow: |
                                [[[
                                  return `<ha-icon
                                    icon="mdi:chevron-up"
                                    style="width:16px; height: 16px;">
                                    </ha-icon>`
                                ]]]  
                            tap_action:
                              action: navigate
                              navigation_path: '#admin-card'
                            show_label: false
                            show_state: true
                            styles:
                              grid:
                                - grid-template-areas: '"i n arrow" "i s arrow"'
                                - grid-template-columns: 60px 1fr 40px
                              icon:
                                - width: 24px
                                - color: black
                              img_cell:
                                - background: '#F79B59'
                                - border-radius: 515px
                                - width: 50px
                                - height: 50px
                              name:
                                - justify-self: start
                                - font-size: 14px
                                - font-weight: 500
                                - padding-left: 10px
                              card:
                                - margin: 0
                                - border-radius: 50px
                                - padding: 12px 14px 12px 8px
                                - font-family: var(--primary-font-family) !important
                              state:
                                - justify-self: start
                                - font-size: 14px
                                - padding-left: 10px
                              custom_fields:
                                arrow:
                                  - justify-self: end
                                  - font-size: 14px
                                  - color: black
                                  - opacity: '0.7'
                    - square: false
                      type: grid
                      cards:
                        - type: custom:button-card
                          color_type: blank-card
                        - type: custom:button-card
                          color_type: blank-card
                        - type: custom:button-card
                          color_type: blank-card
                        - type: custom:button-card
                          color_type: blank-card
                        - type: custom:button-card
                          color_type: blank-card
                      columns: 6
                  columns: 1
              - type: custom:local-conditional-card
                id: tabs3
                default: hide
                card:
                  square: false
                  type: grid
                  cards:
                    - square: false
                      type: grid
                      cards:
                        - type: custom:button-card
                          styles:
                            card:
                              - height: 0px
                              - padding: 0px
                              - background: none
                              - font-family: var(--primary-font-family) !important
                        - type: custom:button-card
                          styles:
                            card:
                              - height: 0px
                              - padding: 0px
                              - background: none
                        - type: custom:button-card
                          styles:
                            card:
                              - height: 30px
                              - border: 2px solid silver
                              - margin-top: '-38px'
                              - background: none
                              - font-family: var(--primary-font-family) !important
                      columns: 3
                    - square: false
                      type: grid
                      cards:
                        - type: custom:decluttering-card
                          template: camera_view_template
                          variables:
                            - motion_entity: group.rtc001_motion
                            - camera_entity: driveway_snapshots_fluent
                            - camera_entity2: driveway_fluent
                        - type: custom:decluttering-card
                          template: camera_view_template
                          variables:
                            - motion_entity: group.rtc002_motion
                            - camera_entity: front_door_snapshots_fluent
                            - camera_entity2: front_door_fluent
                        - type: custom:decluttering-card
                          template: camera_view_template
                          variables:
                            - motion_entity: group.rtc003_motion
                            - camera_entity: front_corner_snapshots_fluent
                            - camera_entity2: front_corner_fluent
                        - type: custom:decluttering-card
                          template: camera_view_template
                          variables:
                            - motion_entity: group.rtc004_motion
                            - camera_entity: lanai_snapshots_fluent
                            - camera_entity2: lanai_fluent
                        - type: custom:decluttering-card
                          template: camera_view_template
                          variables:
                            - motion_entity: group.rtc007_motion
                            - camera_entity: rear_center_snapshots_fluent
                            - camera_entity2: rear_center_fluent
                        - type: custom:decluttering-card
                          template: camera_view_template
                          variables:
                            - motion_entity: group.rtc005_motion
                            - camera_entity: left_side_snapshots_fluent
                            - camera_entity2: left_side_fluent
                        - type: custom:decluttering-card
                          template: camera_view_template
                          variables:
                            - motion_entity: group.rtc006_motion
                            - camera_entity: rear_left_corner_snapshots_fluent
                            - camera_entity2: rear_left_corner_fluent
                        - type: custom:decluttering-card
                          template: camera_view_template
                          variables:
                            - motion_entity: group.rtc008_motion
                            - camera_entity: rear_snapshots_fluent
                            - camera_entity2: rear_fluent
                        - type: custom:decluttering-card
                          template: camera_view_template
                          variables:
                            - motion_entity: group.rtc009_motion
                            - camera_entity: right_side_snapshots_fluent
                            - camera_entity2: right_side_fluent
                        - type: custom:decluttering-card
                          template: camera_view_template
                          variables:
                            - motion_entity: group.rtc010_motion
                            - camera_entity: garage_snapshots_fluent
                            - camera_entity2: garage_fluent
                        - type: custom:llmvision-card
                          entity: calendar.llm_vision_timeline
                          number_of_hours: 36
                          number_of_events: 5
                          language: en
                          category_filters: []
                          camera_filters:
                            - camera.front_door_fluent
                          card_mod:
                            style: |
                              ha-card {
                                font-family: var(--primary-font-family) !important;
                              }
                      columns: 1
                  columns: 1
              - square: false
                type: grid
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#rem-family-tv'
                        bg_opacity: 76
                        shadow_opacity: 0
                        hide_backdrop: true
                      - type: custom:firemote-card
                        entity: media_player.family_room_tv
                        device_family: roku
                        device_type: roku-generic-tcl
                        compatibility_mode: default
                        roku_remote_entity: remote.family_room_tv
                        defaultRemoteStyle_override: RHR
                        app_launch_1: function-volume-down
                        app_launch_2: function-volume-up
                        app_launch_3: function-mute
                        visible_name_text: Family Room
                        name_position: top
                        visible_name_text_color: '#ffffff'
                        scale: '125'
                        app_launch_4: function-search-roku
                        app_launch_5: netflix
                        app_launch_6: max
                        app_launch_7: paramount-plus
                        app_launch_8: disney-plus
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#theater-card'
                        bg_opacity: 75
                      - square: false
                        columns: 2
                        type: grid
                        cards:
                          - type: custom:button-card
                            template: homey
                            name: Overhead Light
                            entity: light.theater_fan
                            icon: mdi:wall-sconce-round
                          - type: custom:button-card
                            template: homey
                            name: Sconces
                            entity: light.wall_sconces
                            icon: mdi:filmstrip-box
                          - type: custom:button-card
                            template: homey
                            name: null
                            entity: fan.theater_fan
                          - type: custom:button-card
                            template: homey
                            name: Front Room Stereo
                            entity: switch.sonoff_switch_01
                            icon: mdi:speaker
                          - type: custom:button-card
                            template: homey
                            name: Media Remote
                            entity: input_button.vacuum_dummy
                            icon: mdi:remote-tv
                            show_state: false
                            show_label: true
                            label: '>>>>'
                            tap_action:
                              action: navigate
                              navigation_path: '#rem-theater'
                            styles:
                              card:
                                - background: rgba(0,0,0,0)
                                - border: 0px
                                - font-family: var(--primary-font-family) !important
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#rem-theater'
                        bg_opacity: 75
                      - type: custom:firemote-card
                        entity: media_player.theater_projector
                        device_family: roku
                        device_type: roku-generic-hisense
                        compatibility_mode: default
                        roku_remote_entity: remote.theater_projector
                        defaultRemoteStyle_override: ''
                        app_launch_1: function-volume-down
                        app_launch_2: function-volume-up
                        app_launch_3: function-mute
                        visible_name_text: Theater
                        name_position: top
                        visible_name_text_color: '#ffffff'
                        scale: '125'
                        app_launch_4: function-search-roku
                        app_launch_5: netflix
                        app_launch_6: max
                        app_launch_7: paramount-plus
                        app_launch_8: disney-plus
                  - square: false
                    type: grid
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:bubble-card
                            card_type: pop-up
                            hash: '#master-card'
                            bg_opacity: 75
                          - square: false
                            columns: 2
                            type: grid
                            cards:
                              - type: custom:button-card
                                template: homey
                                entity: light.master_lights
                              - square: true
                                type: grid
                                cards:
                                  - type: custom:mushroom-chips-card
                                    chips:
                                      - type: template
                                        icon: mdi:lamp
                                        tap_action:
                                          action: toggle
                                        entity: light.bedside_lamp
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(138, 205, 215, 0.3);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('light.bedside_lamp','on') else 'none' }};
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              font-family: var(--primary-font-family) !important;
                                            }   
                                  - type: custom:mushroom-chips-card
                                    chips:
                                      - type: template
                                        icon: mdi:bed-double
                                        tap_action:
                                          action: toggle
                                        entity: light.bed_light
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(166, 207, 152, 0.3);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('light.bed_light','on') else 'none' }};
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              font-family: var(--primary-font-family) !important;
                                            }   
                                  - type: custom:mushroom-chips-card
                                    chips:
                                      - type: template
                                        icon: mdi:wardrobe
                                        tap_action:
                                          action: toggle
                                        entity: light.chest_light
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(112, 119, 161, 0.6);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('light.chest_light','on') else 'none' }};
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              font-family: var(--primary-font-family) !important;
                                            }   
                                  - type: custom:mushroom-chips-card
                                    chips:
                                      - type: template
                                        icon: mdi:dresser
                                        tap_action:
                                          action: toggle
                                        entity: switch.sonoff_switch_02
                                        card_mod:
                                          style: |
                                            ha-card {
                                              --chip-background: rgba(223, 130, 108, 0.3);
                                              --chip-box-shadow: {{ '0px 0px 8px 5px rgba(250,172,103,0.5)' if is_state('switch.sonoff_switch_02','on') else 'none' }};
                                              padding: 5px!important;
                                              border: 1px solid rgba(0,0,0,0.1)!important;
                                              border-radius: 100px!important;
                                              font-family: var(--primary-font-family) !important;
                                            }   
                                columns: 3
                              - type: custom:button-card
                                template: homey
                                name: Overhead Light
                                entity: light.master
                                icon: mdi:wall-sconce-round
                              - type: custom:button-card
                                template: homey
                                name: TV Remote
                                entity: input_button.vacuum_dummy
                                icon: mdi:remote-tv
                                show_state: false
                                show_label: true
                                label: '>>>>'
                                tap_action:
                                  action: navigate
                                  navigation_path: '#rem-master'
                                styles:
                                  card:
                                    - background: rgba(0,0,0,0)
                                    - border: 0px
                                    - font-family: var(--primary-font-family) !important
                    columns: 1
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#rem-master'
                        bg_opacity: 75
                      - type: custom:firemote-card
                        entity: media_player.master_tv_roku
                        device_family: roku
                        device_type: roku-streaming-stick-4k
                        compatibility_mode: default
                        scale: '125'
                        visible_name_text: Master
                        name_position: top
                        visible_name_text_color: '#ffffff'
                        defaultRemoteStyle_override: ''
                        custom_launchers:
                          - friendly_name: Volup
                            icon: mdi:volume-plus
                            color: '#ffffff'
                            background: '#a35adb'
                            script: master_tv_vol_up
                          - friendly_name: Voldn
                            icon: mdi:volume-minus
                            color: '#ffffff'
                            background: '#a35adb'
                            script: master_tv_vol_down
                          - friendly_name: Mute
                            icon: mdi:volume-mute
                            color: '#ffffff'
                            background: '#a35adb'
                            script: master_tv_vol_mute
                        button_overrides:
                          power-button:
                            script: master_tv_toggle
                          volume-up-button:
                            script: master_tv_vol_up
                          volume-down-button:
                            script: master_tv_vol_down
                          mute-button:
                            script: master_tv_vol_mute
                        roku_remote_entity: remote.master_tv_roku
                        app_launch_1: netflix
                        app_launch_2: disney-plus
                        app_launch_3: paramount-plus
                        app_launch_4: max
                        app_launch_5: customlauncher Volup
                        app_launch_6: customlauncher Voldn
                        app_launch_7: customlauncher Mute
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#office-card'
                        bg_opacity: 75
                      - square: false
                        type: grid
                        cards:
                          - square: false
                            columns: 2
                            type: grid
                            cards:
                              - type: custom:button-card
                                template: homey
                                name: Overhead Light
                                entity: light.office_fan
                                icon: mdi:wall-sconce-round
                              - type: custom:button-card
                                template: homey
                                name: Fan
                                entity: fan.office_fan
                                icon: mdi:fan
                              - type: custom:button-card
                                template: homey
                                entity: light.office_leds
                              - type: custom:button-card
                                template: homey
                                entity: light.printer_nook
                              - type: custom:button-card
                                template: homey
                                entity: switch.arcades
                                icon: mdi:pac-man
                              - type: custom:button-card
                                template: homey
                                name: TV Remote
                                entity: input_button.vacuum_dummy
                                icon: mdi:remote-tv
                                show_state: false
                                show_label: true
                                label: '>>>>'
                                tap_action:
                                  action: navigate
                                  navigation_path: '#rem-office'
                                styles:
                                  card:
                                    - background: rgba(0,0,0,0)
                                    - border: 0px
                                    - font-family: var(--primary-font-family) !important
                              - type: conditional
                                conditions:
                                  - condition: user
                                    users:
                                      - ef8551138df645acab3b193b2dd7884c
                                card:
                                  type: custom:button-card
                                  name: Admin
                                  icon: mdi:cog
                                  custom_fields:
                                    arrow: |
                                      [[[
                                        return `<ha-icon
                                          icon="mdi:chevron-up"
                                          style="width:16px; height: 16px;">
                                          </ha-icon>`
                                      ]]]  
                                  tap_action:
                                    action: navigate
                                    navigation_path: '#admin-card'
                                  show_label: false
                                  show_state: true
                                  styles:
                                    grid:
                                      - grid-template-areas: '"i n arrow" "i s arrow"'
                                      - grid-template-columns: 60px 1fr 40px
                                    icon:
                                      - width: 24px
                                      - color: black
                                    img_cell:
                                      - background: '#F79B59'
                                      - border-radius: 515px
                                      - width: 50px
                                      - height: 50px
                                    name:
                                      - justify-self: start
                                      - font-size: 14px
                                      - font-weight: 500
                                      - padding-left: 10px
                                    card:
                                      - background: transparent
                                      - width: 60px
                                      - border-radius: 500px
                                      - font-family: var(--primary-font-family) !important
                                    state:
                                      - justify-self: start
                                      - font-size: 14px
                                      - padding-left: 10px
                                    custom_fields:
                                      arrow:
                                        - justify-self: end
                                        - font-size: 14px
                                        - color: black
                                        - opacity: '0.7'
                        columns: 1
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#rem-office'
                        bg_opacity: 76
                        shadow_opacity: 0
                        hide_backdrop: true
                      - square: false
                        type: grid
                        cards:
                          - type: custom:firemote-card
                            entity: media_player.josh_tv
                            device_family: roku
                            device_type: roku-generic-hisense
                            compatibility_mode: default
                            roku_remote_entity: remote.josh_tv
                            defaultRemoteStyle_override: ''
                            app_launch_1: function-volume-up
                            app_launch_2: function-volume-down
                            app_launch_3: function-mute
                            visible_name_text: Office
                            name_position: top
                            visible_name_text_color: '#ffffff'
                            scale: '125'
                            app_launch_4: function-search-roku
                            app_launch_5: netflix
                            app_launch_6: max
                            app_launch_7: paramount-plus
                            app_launch_8: disney-plus
                        columns: 1
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#ext-card'
                        bg_opacity: 75
                      - square: false
                        type: grid
                        cards:
                          - type: custom:button-card
                            template: homey
                            name: Porch Light
                            entity: light.porch
                            icon: mdi:post-lamp
                          - type: custom:button-card
                            template: homey
                            name: Backyard Security Lights
                            entity: light.security_lights
                            icon: mdi:post-lamp
                        columns: 2
                      - type: conditional
                        conditions:
                          - condition: state
                            entity: switch.pitboss
                            state: 'off'
                        card:
                          square: false
                          type: grid
                          cards:
                            - square: false
                              type: grid
                              cards:
                                - type: markdown
                                  content: Smoker Grill
                                  card_mod:
                                    style: |
                                      ha-card {
                                        font-weight: 500;
                                        font-size: 1.2em;
                                        background: transparent !important;
                                        font-family: var(--primary-font-family) !important;
                                      }
                                      ha-markdown.no-header {
                                        padding: 0px 8px;      
                                      }
                            - square: false
                              columns: 4
                              type: grid
                              cards:
                                - type: custom:button-card
                                  template: homey
                                  name: Main Power
                                  entity: switch.pitboss
                                  icon: mdi:power
                                - type: custom:button-card
                                  template: homey
                                  name: Module Power
                                  entity: switch.pbg_943cc67b7208_module_power
                                  icon: mdi:power
                          columns: 1
                      - type: conditional
                        conditions:
                          - condition: state
                            entity: switch.pitboss
                            state: 'on'
                        card:
                          square: false
                          type: grid
                          cards:
                            - square: false
                              type: grid
                              cards:
                                - type: markdown
                                  content: Smoker Grill
                                  card_mod:
                                    style: |
                                      ha-card {
                                        font-weight: 500;
                                        font-size: 1.2em;
                                        background: transparent !important;
                                        font-family: var(--primary-font-family) !important;
                                      }
                                      ha-markdown.no-header {
                                        padding: 0px 8px;      
                                      }
                            - square: false
                              columns: 4
                              type: grid
                              cards:
                                - type: custom:button-card
                                  template: homey
                                  name: Main Power
                                  entity: switch.pitboss
                                  icon: mdi:power
                                - type: custom:button-card
                                  template: homey
                                  name: Module Power
                                  entity: switch.pbg_943cc67b7208_module_power
                                  icon: mdi:power
                                - type: custom:button-card
                                  template: homey
                                  name: Prime
                                  entity: switch.pbg_943cc67b7208_prime
                                  icon: mdi:screw-flat-top
                                - type: custom:button-card
                                  template: homey
                                  name: Light
                                  entity: light.pbg_943cc67b7208_light
                                  icon: mdi:power
                            - square: false
                              type: grid
                              cards:
                                - type: thermostat
                                  entity: climate.pbg_943cc67b7208_grill_temperature
                                  theme: macOS Theme
                                  show_current_as_primary: true
                                  features:
                                    - type: climate-hvac-modes
                                      hvac_modes:
                                        - 'off'
                                        - heat
                                        - cool
                                        - heat_cool
                                  name: PitBoss
                                  card_mod:
                                    style: |
                                      ha-card {
                                        background: transparent;
                                        font-family: var(--primary-font-family) !important;
                                      }
                                - square: false
                                  type: grid
                                  cards:
                                    - type: custom:mushroom-chips-card
                                      alignment: center
                                      chips:
                                        - type: template
                                          tap_action:
                                            action: null
                                          hold_action:
                                            action: none
                                          double_tap_action:
                                            action: none
                                          entity: sensor.pbg_943cc67b7208_probe_1
                                          content: >-
                                            {{
                                            states('sensor.pbg_943cc67b7208_probe_1')|round(0)}}
                                          card_mod:
                                            style: |
                                              ha-card {
                                                --chip-background: rgba(138, 205, 215, 0.3);
                                                font-size: 3em!important;
                                                align: center!important;
                                                padding: 10px!important;
                                                border: 1px solid rgba(0,0,0,0.1)!important;
                                                border-radius: 100px!important;
                                                font-family: var(--primary-font-family) !important;
                                              }  
                                    - type: custom:mushroom-chips-card
                                      alignment: center
                                      chips:
                                        - type: template
                                          tap_action:
                                            action: null
                                          hold_action:
                                            action: none
                                          double_tap_action:
                                            action: none
                                          entity: sensor.pbg_943cc67b7208_probe_2
                                          content: >-
                                            {{
                                            states('sensor.pbg_943cc67b7208_probe_2')|round(0)}}
                                          card_mod:
                                            style: |
                                              ha-card {
                                                --chip-background: rgba(138, 205, 215, 0.3);      
                                                font-size: 3em!important;
                                                align: center!important;
                                                padding: 10px!important;
                                                border: 1px solid rgba(0,0,0,0.1)!important;
                                                border-radius: 100px!important;
                                                font-family: var(--primary-font-family) !important;
                                              }  
                                  columns: 4
                              columns: 1
                          columns: 1
                      - square: false
                        type: grid
                        cards:
                          - square: false
                            type: grid
                            cards:
                              - type: markdown
                                content: Sprinklers
                                card_mod:
                                  style: |
                                    ha-card {
                                      font-weight: 500;
                                      font-size: 1.2em;
                                      background: transparent !important;
                                      font-family: var(--primary-font-family) !important;
                                    }
                                    ha-markdown.no-header {
                                      padding: 0px 8px;      
                                    }
                          - square: false
                            columns: 2
                            type: grid
                            cards:
                              - type: custom:button-card
                                template: homey
                                name: Zone 1 - Sidewalk
                                entity: switch.sprinkler_zone1
                                icon: mdi:sprinkler
                              - type: custom:button-card
                                template: homey
                                name: Zone 2 - Center & Right
                                entity: switch.sprinkler_zone2
                                icon: mdi:sprinkler
                              - type: custom:button-card
                                template: homey
                                name: Zone 3 - Bushes
                                entity: switch.sprinkler_zone3
                                icon: mdi:sprinkler
                              - type: custom:button-card
                                template: homey
                                name: Zone 4 - Left
                                entity: switch.sprinkler_zone4
                                icon: mdi:sprinkler
                              - type: custom:button-card
                                template: homey
                                name: Zone 5 - Backyard
                                entity: switch.sprinkler_zone5
                                icon: mdi:sprinkler-variant
                        columns: 1
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#hvac-card'
                        bg_opacity: 75
                      - square: false
                        type: grid
                        cards:
                          - type: thermostat
                            entity: climate.main_floor
                            theme: macOS Theme
                            show_current_as_primary: true
                            features:
                              - type: climate-hvac-modes
                                hvac_modes:
                                  - 'off'
                                  - heat
                                  - cool
                                  - heat_cool
                              - type: climate-fan-modes
                                style: dropdown
                                fan_modes:
                                  - 'on'
                                  - auto
                            name: Downstairs
                            card_mod:
                              style: |
                                ha-card {
                                  background: transparent;
                                  font-family: var(--primary-font-family) !important;
                                }
                          - square: false
                            type: grid
                            cards:
                              - type: custom:mushroom-chips-card
                                alignment: center
                                chips:
                                  - type: template
                                    tap_action:
                                      action: null
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    entity: sensor.main_floor_current_temperature_2
                                    content: >-
                                      {{
                                      states('sensor.main_floor_current_temp')|round(0)}}
                                    card_mod:
                                      style: |
                                        ha-card {
                                          --chip-background: rgba(138, 205, 215, 0.3);
                                          --chip-box-shadow: {{ '0px 0px 5px 2px rgba(250,172,103,0.5)' if is_state('binary_sensor.main_floor_2','on') else 'none' }};
                                          font-size: 3em!important;
                                          align: center!important;
                                          padding: 10px!important;
                                          border: 1px solid rgba(0,0,0,0.1)!important;
                                          border-radius: 100px!important;
                                          font-family: var(--primary-font-family) !important;
                                        }  
                              - type: custom:mushroom-chips-card
                                alignment: center
                                chips:
                                  - type: template
                                    tap_action:
                                      action: null
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    entity: sensor.theater_temperature
                                    content: >-
                                      {{
                                      states('sensor.theater_temperature')|round(0)}}
                                    card_mod:
                                      style: |
                                        ha-card {
                                          --chip-background: rgba(138, 205, 215, 0.3);
                                          --chip-box-shadow: {{ '0px 0px 5px 2px rgba(250,172,103,0.5)' if is_state('binary_sensor.theater_occupancy','on') else 'none' }};
                                          font-size: 3em!important;
                                          align: center!important;
                                          padding: 10px!important;
                                          border: 1px solid rgba(0,0,0,0.1)!important;
                                          border-radius: 100px!important;
                                          font-family: var(--primary-font-family) !important;
                                        }  
                              - type: custom:mushroom-chips-card
                                alignment: center
                                chips:
                                  - type: template
                                    tap_action:
                                      action: null
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    entity: sensor.front_living_room_temperature
                                    content: >-
                                      {{
                                      states('sensor.front_living_room_temperature')|round(0)}}
                                    card_mod:
                                      style: |
                                        ha-card {
                                          --chip-background: rgba(138, 205, 215, 0.3);
                                          --chip-box-shadow: {{ '0px 0px 5px 2px rgba(250,172,103,0.5)' if is_state('binary_sensor.front_living_rm','on') else 'none' }};
                                          font-size: 3em!important;
                                          align: center!important;
                                          padding: 10px!important;
                                          border: 1px solid rgba(0,0,0,0.1)!important;
                                          border-radius: 100px!important;
                                          font-family: var(--primary-font-family) !important;
                                        }  
                              - type: custom:mushroom-chips-card
                                alignment: center
                                chips:
                                  - type: template
                                    tap_action:
                                      action: null
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    entity: sensor.master_temperature
                                    content: >-
                                      {{
                                      states('sensor.master_temperature')|round(0)}}
                                    card_mod:
                                      style: |
                                        ha-card {
                                          --chip-background: rgba(138, 205, 215, 0.3);
                                          --chip-box-shadow: {{ '0px 0px 5px 2px rgba(250,172,103,0.5)' if is_state('binary_sensor.master_2','on') else 'none' }};
                                          font-size: 3em!important;
                                          align: center!important;
                                          padding: 10px!important;
                                          border: 1px solid rgba(0,0,0,0.1)!important;
                                          border-radius: 100px!important;
                                          font-family: var(--primary-font-family) !important;
                                        }  
                              - type: custom:mushroom-title-card
                                title: ''
                                alignment: center
                                subtitle: Main
                                title_tap_action:
                                  action: none
                                subtitle_tap_action:
                                  action: none
                                card_mod:
                                  style: |
                                    ha-card {
                                      margin-top: -10px!important;
                                      font-family: var(--primary-font-family) !important;
                                    }
                              - type: custom:mushroom-title-card
                                title: ''
                                alignment: center
                                subtitle: Theater
                                title_tap_action:
                                  action: none
                                subtitle_tap_action:
                                  action: none
                                card_mod:
                                  style: |
                                    ha-card {
                                      margin-top: -10px!important;
                                      font-family: var(--primary-font-family) !important;
                                    }
                              - type: custom:mushroom-title-card
                                title: ''
                                alignment: center
                                subtitle: Front
                                title_tap_action:
                                  action: none
                                subtitle_tap_action:
                                  action: none
                                card_mod:
                                  style: |
                                    ha-card {
                                      margin-top: -10px!important;
                                      font-family: var(--primary-font-family) !important;
                                    }
                              - type: custom:mushroom-title-card
                                title: ''
                                alignment: center
                                subtitle: Master
                                title_tap_action:
                                  action: none
                                subtitle_tap_action:
                                  action: none
                                card_mod:
                                  style: |
                                    ha-card {
                                      margin-top: -10px!important;
                                      font-family: var(--primary-font-family) !important;
                                    }
                              - type: custom:mushroom-chips-card
                                alignment: center
                                chips:
                                  - type: template
                                    tap_action:
                                      action: null
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    entity: sensor.family_room_temperature
                                    content: >-
                                      {{
                                      states('sensor.family_room_temperature')|round(0)}}
                                    card_mod:
                                      style: |
                                        ha-card {
                                          --chip-background: rgba(138, 205, 215, 0.3);
                                          --chip-box-shadow: {{ '0px 0px 5px 2px rgba(250,172,103,0.5)' if is_state('binary_sensor.family_room_2','on') else 'none' }};
                                          font-size: 3em!important;
                                          align: center!important;
                                          padding: 10px!important;
                                          border: 1px solid rgba(0,0,0,0.1)!important;
                                          border-radius: 100px!important;
                                          font-family: var(--primary-font-family) !important;
                                        }  
                              - type: custom:mushroom-chips-card
                                alignment: center
                                chips:
                                  - type: template
                                    tap_action:
                                      action: null
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    entity: sensor.office_temperature
                                    content: >-
                                      {{
                                      states('sensor.office_temperature')|round(0)
                                      }}
                                    card_mod:
                                      style: |
                                        ha-card {
                                          --chip-background: rgba(138, 205, 215, 0.3);
                                          --chip-box-shadow: {{ '0px 0px 5px 2px rgba(250,172,103,0.5)' if is_state('binary_sensor.office_2','on') else 'none' }};
                                          font-size: 3em!important;
                                          align: center!important;
                                          padding: 10px!important;
                                          border: 1px solid rgba(0,0,0,0.1)!important;
                                          border-radius: 100px!important;
                                          font-family: var(--primary-font-family) !important;
                                        }  
                              - type: custom:mushroom-chips-card
                                alignment: center
                                chips:
                                  - type: template
                                    tap_action:
                                      action: null
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    entity: sensor.guest_temperature_2
                                    content: >-
                                      {{
                                      states('sensor.guest_temperature_2')|round(0)}}
                                    card_mod:
                                      style: |
                                        ha-card {
                                          --chip-background: rgba(138, 205, 215, 0.3);
                                          --chip-box-shadow: {{ '0px 0px 5px 2px rgba(250,172,103,0.5)' if is_state('binary_sensor.guest_occupancy_2','on') else 'none' }};
                                          font-size: 3em!important;
                                          align: center!important;
                                          padding: 10px!important;
                                          border: 1px solid rgba(0,0,0,0.1)!important;
                                          border-radius: 100px!important;
                                          font-family: var(--primary-font-family) !important;
                                        }  
                              - type: custom:mushroom-chips-card
                                alignment: center
                                chips:
                                  - type: template
                                    tap_action:
                                      action: null
                                    hold_action:
                                      action: none
                                    double_tap_action:
                                      action: none
                                    entity: sensor.cosmo_temperature
                                    content: >-
                                      {{
                                      states('sensor.cosmo_temperature')|round(0)}}
                                    card_mod:
                                      style: |
                                        ha-card {
                                          --chip-background: rgba(138, 205, 215, 0.3);
                                          --chip-box-shadow: {{ '0px 0px 5px 2px rgba(250,172,103,0.5)' if is_state('binary_sensor.cosmo_occupancy_2','on') else 'none' }};
                                          font-size: 3em!important;
                                          align: center!important;
                                          padding: 10px!important;
                                          border: 1px solid rgba(0,0,0,0.1)!important;
                                          border-radius: 100px!important;
                                          font-family: var(--primary-font-family) !important;
                                        }  
                              - type: custom:mushroom-title-card
                                title: ''
                                alignment: center
                                subtitle: Family
                                title_tap_action:
                                  action: none
                                subtitle_tap_action:
                                  action: none
                                card_mod:
                                  style: |
                                    ha-card {
                                      margin-top: -10px!important;
                                      font-family: var(--primary-font-family) !important;
                                    }
                              - type: custom:mushroom-title-card
                                title: ''
                                alignment: center
                                subtitle: Office
                                title_tap_action:
                                  action: none
                                subtitle_tap_action:
                                  action: none
                                card_mod:
                                  style: |
                                    ha-card {
                                      margin-top: -10px!important;
                                      font-family: var(--primary-font-family) !important;
                                    }
                              - type: custom:mushroom-title-card
                                title: ''
                                alignment: center
                                subtitle: Guest
                                title_tap_action:
                                  action: none
                                subtitle_tap_action:
                                  action: none
                                card_mod:
                                  style: |
                                    ha-card {
                                      margin-top: -10px!important;
                                      font-family: var(--primary-font-family) !important;
                                    }
                              - type: custom:mushroom-title-card
                                title: ''
                                alignment: center
                                subtitle: cosmo
                                title_tap_action:
                                  action: none
                                subtitle_tap_action:
                                  action: none
                                card_mod:
                                  style: |
                                    ha-card {
                                      margin-top: -10px!important;
                                      font-family: var(--primary-font-family) !important;
                                    }
                            columns: 4
                          - type: thermostat
                            entity: climate.upstairs
                            theme: macOS Theme
                            show_current_as_primary: true
                            features:
                              - type: climate-hvac-modes
                                hvac_modes:
                                  - 'off'
                                  - heat
                                  - cool
                                  - heat_cool
                              - type: climate-fan-modes
                                style: dropdown
                                fan_modes:
                                  - 'on'
                                  - auto
                            name: Upstairs
                            card_mod:
                              style: |
                                ha-card {
                                  background: transparent;
                                  font-family: var(--primary-font-family) !important;
                                }
                        columns: 1
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#vac-card'
                        bg_opacity: 75
                      - square: false
                        type: grid
                        cards:
                          - type: custom:button-card
                            name: KITT
                            show_entity_picture: true
                            entity_picture: /local/lovelace/kitt-500.png
                            entity: vacuum.k_i_t_t
                            custom_fields:
                              arrow: |
                                [[[
                                  return `<ha-icon
                                    icon="mdi:chevron-up"
                                    style="width:16px; height: 16px;">
                                    </ha-icon>`
                                ]]]  
                            tap_action:
                              action: navigate
                              navigation_path: '#kitt-card'
                            show_label: false
                            show_state: true
                            styles:
                              grid:
                                - grid-template-areas: '"i n arrow" "i s arrow"'
                                - grid-template-columns: 60px 1fr 40px
                              entity_picture:
                                - width: 50px
                              img_cell:
                                - border-radius: 515px
                                - width: 50px
                                - height: 50px
                              name:
                                - justify-self: start
                                - font-size: 14px
                                - font-weight: 500
                                - padding-left: 10px
                              card:
                                - margin: 0
                                - border-radius: 50px
                                - padding: 12px 14px 12px 8px
                                - font-family: var(--primary-font-family) !important
                              state:
                                - justify-self: start
                                - font-size: 14px
                                - padding-left: 10px
                              custom_fields:
                                arrow:
                                  - justify-self: end
                                  - font-size: 14px
                                  - color: black
                                  - opacity: '0.7'
                          - type: custom:button-card
                            name: R2D2
                            show_entity_picture: true
                            entity_picture: /local/lovelace/arturito_500.png
                            entity: vacuum.arturito
                            custom_fields:
                              arrow: |
                                [[[
                                  return `<ha-icon
                                    icon="mdi:chevron-up"
                                    style="width:16px; height: 16px;">
                                    </ha-icon>`
                                ]]]  
                            tap_action:
                              action: navigate
                              navigation_path: '#r2d2-card'
                            show_label: false
                            show_state: true
                            styles:
                              grid:
                                - grid-template-areas: '"i n arrow" "i s arrow"'
                                - grid-template-columns: 60px 1fr 40px
                              entity_picture:
                                - width: 50px
                              img_cell:
                                - border-radius: 515px
                                - width: 50px
                                - height: 50px
                              name:
                                - justify-self: start
                                - font-size: 14px
                                - font-weight: 500
                                - padding-left: 10px
                              card:
                                - margin: 0
                                - border-radius: 50px
                                - padding: 12px 14px 12px 8px
                                - font-family: var(--primary-font-family) !important
                              state:
                                - justify-self: start
                                - font-size: 14px
                                - padding-left: 10px
                              custom_fields:
                                arrow:
                                  - justify-self: end
                                  - font-size: 14px
                                  - color: black
                                  - opacity: '0.7'
                        columns: 2
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#kitt-card'
                        bg_opacity: 75
                      - square: false
                        type: grid
                        cards:
                          - type: custom:vacuum-card
                            entity: vacuum.k_i_t_t
                            image: /local/lovelace/kitt-500a.png
                            show_name: true
                            show_status: true
                            show_toolbar: false
                            compact_view: false
                            stats:
                              default:
                                - entity_id: sensor.k_i_t_t_filter_left
                                  value_template: >
                                    {% if states('sensor.k_i_t_t_filter_left')
                                    <= '0' -%}
                                        0
                                    {%- else -%}
                                        {{ (states('sensor.k_i_t_t_filter_left') | float(0) / 3600) | round(0) }}
                                    {%- endif %}
                                  unit: h
                                  subtitle: Filter
                                - entity_id: sensor.k_i_t_t_main_brush_left
                                  value_template: >
                                    {% if
                                    states('sensor.k_i_t_t_main_brush_left') <=
                                    '0' -%}
                                        0
                                    {%- else -%}
                                        {{ (states('sensor.k_i_t_t_main_brush_left') | float(0) / 3600) | round(0) }}
                                    {%- endif %}
                                  unit: h
                                  subtitle: Main Brush
                                - entity_id: sensor.k_i_t_t_side_brush_left
                                  value_template: >
                                    {% if
                                    states('sensor.k_i_t_t_side_brush_left') <=
                                    '0' -%}
                                        0
                                    {%- else -%}
                                        {{ (states('sensor.k_i_t_t_side_brush_left') | float(0) / 3600) | round(0) }}
                                    {%- endif %}
                                  unit: h
                                  subtitle: Side Brush
                                - entity_id: sensor.k_i_t_t_sensor_dirty_left
                                  value_template: >
                                    {% if
                                    states('sensor.k_i_t_t_sensor_dirty_left')
                                    <= '0' -%}
                                        0
                                    {%- else -%}
                                        {{ (states('sensor.k_i_t_t_sensor_dirty_left') | float(0) / 3600) | round(0) }}
                                    {%- endif %}
                                  unit: h
                                  subtitle: Sensors
                          - type: custom:xiaomi-vacuum-map-card
                            map_source:
                              camera: camera.k_i_t_t_map
                            entity: vacuum.k_i_t_t
                            vacuum_platform: humbertogontijo/homeassistant-roborock
                            map_locked: true
                            calibration_source:
                              camera: true
                            internal_variables:
                              null_var: null
                            map_modes:
                              - template: vacuum_clean_segment
                                predefined_selections:
                                  - id: 26
                                    label:
                                      text: Master
                                      x: 21500
                                      'y': 24075
                                      offset_y: 35
                                    icon:
                                      name: mdi:bed
                                      x: 21500
                                      'y': 23475
                                  - id: 20
                                    label:
                                      text: Kitchen
                                      x: 17700
                                      'y': 30850
                                      offset_y: 35
                                    icon:
                                      name: mdi:fridge
                                      x: 17700
                                      'y': 30250
                                  - id: 22
                                    label:
                                      text: Front
                                      x: 22625
                                      'y': 28950
                                      offset_y: 35
                                    icon:
                                      name: mdi:table-chair
                                      x: 22625
                                      'y': 28350
                                  - id: 16
                                    label:
                                      text: Cosmo
                                      x: 9625
                                      'y': 35950
                                      offset_y: 35
                                    icon:
                                      name: mdi:bed
                                      x: 9625
                                      'y': 35350
                                  - id: 28
                                    label:
                                      text: Theater
                                      x: 26275
                                      'y': 30750
                                      offset_y: 35
                                    icon:
                                      name: mdi:television
                                      x: 26275
                                      'y': 30050
                                  - id: 19
                                    label:
                                      text: Family Rm
                                      x: 13450
                                      'y': 31975
                                      offset_y: 35
                                    icon:
                                      name: mdi:sofa
                                      x: 13450
                                      'y': 31375
                                  - id: 17
                                    label:
                                      text: Guest
                                      x: 13550
                                      'y': 37025
                                      offset_y: 35
                                    icon:
                                      name: mdi:laptop
                                      x: 13550
                                      'y': 36425
                                  - id: 27
                                    label:
                                      text: Office
                                      x: 19700
                                      'y': 36250
                                      offset_y: 35
                                    icon:
                                      name: mdi:laptop
                                      x: 19700
                                      'y': 35650
                              - template: vacuum_clean_zone
                              - template: vacuum_goto
                            append_tiles: false
                            tiles:
                              - entity: sensor.vac_buttons
                                label: Clean
                                icon: mdi:broom
                                tap_action:
                                  action: call-service
                                  service: switch.toggle
                                  service_data:
                                    entity_id: switch.vac_daily
                              - entity: sensor.vac_buttons
                                label: Empty
                                icon: mdi:delete
                                tap_action:
                                  action: call-service
                                  service: vacuum.send_command
                                  service_data:
                                    entity_id: vacuum.k_i_t_t
                                    command: app_start_collect_dust
                              - entity: sensor.vac_buttons
                                label: Reset
                                icon: mdi:recycle
                                tap_action:
                                  action: call-service
                                  service: switch.toggle
                                  service_data:
                                    entity_id: switch.vac_reset
                              - entity: input_boolean.vac_daily
                                label: Schedule
                                icon: mdi:calendar
                                tap_action:
                                  action: toggle
                            two_finger_pan: true
                            card_mod:
                              style: |
                                ha-card {
                                  --map-card-primary-color: rgb(123, 130, 156);
                                  --map-card-secondary-color: rgba(217, 224, 250,0.5);

                                  --map-card-zoomer-background: rgba(217, 224, 250,0.5);
                                  font-family: var(--primary-font-family) !important;
                                }
                                img#map-image {
                                    margin-left: -30px;
                                    width: 108%;
                                }
                                svg text {
                                  font-weight: 500;
                                }
                                :host 
                                  .tile-wrapper.clickable.ripple {
                                    padding-right: 5px;
                                    width: 75px !important;
                                  }    
                          - type: custom:html-template-card
                            ignore_line_breaks: true
                            content: >
                              <div><strong>Current Room: </strong> {{
                              states('input_text.vac_task') }}</br><strong>Jobs
                              in queue: </strong>{{
                              states('input_number.vac_queue') | round(0)
                              }}</div>
                        columns: 1
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#r2d2-card'
                        bg_opacity: 75
                      - type: custom:vacuum-card
                        entity: vacuum.arturito
                        image: /local/lovelace/arturito_500a.png
                        show_toolbar: true
                        show_status: true
                        compact_view: false
                        show_name: true
                        stats:
                          default:
                            - entity_id: sensor.arturito_filter_left_hours
                              value_template: >
                                {% if
                                states('sensor.arturito_filter_left_hours') <=
                                '0' -%}
                                    0
                                {%- else -%}
                                    {{ states('sensor.arturito_filter_left_hours') | round(0) }}
                                {%- endif %}
                              unit: h
                              subtitle: Filter
                            - entity_id: sensor.arturito_main_brush_left_hours
                              value_template: >
                                {% if
                                states('sensor.arturito_main_brush_left_hours')
                                <= '0' -%}
                                    0
                                {%- else -%}
                                    {{ states('sensor.arturito_main_brush_left_hours') | round(0) }}
                                {%- endif %}
                              unit: h
                              subtitle: Main brush
                            - entity_id: sensor.arturito_side_brush_left_hours
                              value_template: >
                                {% if
                                states('sensor.arturito_side_brush_left_hours')
                                <= '0' -%}
                                    0
                                {%- else -%}
                                    {{ states('sensor.arturito_side_brush_left_hours') | round(0) }}
                                {%- endif %}
                              unit: h
                              subtitle: Side brush
                            - entity_id: sensor.arturito_sensor_dirty_left_hours
                              value_template: >
                                {% if
                                states('sensor.arturito_sensor_dirty_left_hours')
                                <= '0' -%}
                                    0
                                {%- else -%}
                                    {{ states('sensor.arturito_sensor_dirty_left_hours') | round(0) }}
                                {%- endif %}
                              unit: h
                              subtitle: Sensors
                      - square: false
                        type: grid
                        cards:
                          - type: custom:button-card
                            layout: name_state
                            name: Clean
                            show_state: true
                            tap_action:
                              action: call-service
                              service: vacuum.start
                              service_data:
                                entity_id: vacuum.arturito
                            show_icon: true
                            size: 10%
                            icon: mdi:broom
                          - type: custom:button-card
                            layout: name_state
                            name: Schedule
                            entity: input_boolean.vac_daily2
                            show_state: true
                            action: toggle
                            show_icon: true
                            size: 10%
                            icon: mdi:calendar
                        columns: 2
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#admin-card'
                        bg_opacity: 76
                        shadow_opacity: 0
                        hide_backdrop: true
                      - square: false
                        type: grid
                        cards:
                          - type: markdown
                            content: Notification & Alert Control
                            card_mod:
                              style: |
                                ha-card {
                                  font-weight: 500; 
                                  font-size: 1.2em;
                                  background: transparent !important;
                                  font-family: var(--primary-font-family) !important;
                                }
                                ha-markdown.no-header {
                                  padding: 0px 8px;      
                                }
                          - square: false
                            type: grid
                            cards:
                              - type: custom:button-card
                                template: homey
                                name: Door Motion Alert
                                entity: input_boolean.door_motion_alert
                                icon: mdi:alert
                              - type: custom:button-card
                                template: homey
                                name: Garage Open Alert
                                entity: input_boolean.garage_open_alert
                                icon: mdi:alert
                            columns: 2
                          - type: markdown
                            content: System Monitoring
                            card_mod:
                              style: |
                                ha-card {
                                  font-weight: 500; 
                                  font-size: 1.2em;
                                  background: transparent !important;
                                  font-family: var(--primary-font-family) !important;
                                }
                                ha-markdown.no-header {
                                  padding: 0px 8px;      
                                }
                          - type: entities
                            entities:
                              - entity: sensor.uptime
                                name: HA Last Restart
                              - entity: sensor.last_snapshot
                                name: HA Last Backup
                                icon: mdi:clock
                              - entity: sensor.last_boot
                                name: Server Last Reboot
                              - entity: sensor.cpu_temp
                                icon: mdi:thermometer
                                name: Server CPU Temp
                              - entity: sensor.disk_free_home
                                name: Server Disk Free Space
                              - entity: sensor.memory_free_gb
                                name: Server Memory Free
                              - entity: sensor.apc_1500_status
                              - entity: sensor.apc_1500_battery_charge
                              - entity: sensor.apc_1500_battery_runtime_min
                                icon: mdi:timer
                              - entity: sensor.apc_1500_load
                            state_color: true
                            show_header_toggle: false
                            card_mod:
                              style: |
                                ha-card {
                                  font-family: var(--primary-font-family) !important;
                                }
                          - type: markdown
                            content: Presence Tracking
                            card_mod:
                              style: |
                                ha-card {
                                  font-weight: 500; 
                                  font-size: 1.2em;
                                  background: transparent !important;
                                  font-family: var(--primary-font-family) !important;
                                }
                                ha-markdown.no-header {
                                  padding: 0px 8px;      
                                }
                          - type: custom:icloud3-event-log-card
                            card_mod:
                              style: |
                                #title {
                                  visibility: hidden;
                                }
                                #title:after {
                                  visibility: visible;
                                  position: absolute;
                                  top: 0;
                                  left: 0;
                                  font-size: 16px;
                                  font-weight: bold;
                                  content: "Event Log";
                                }
                          - type: markdown
                            content: Battery Levels
                            card_mod:
                              style: |
                                ha-card {
                                  font-weight: 500; 
                                  font-size: 1.2em;
                                  background: transparent !important;
                                  font-family: var(--primary-font-family) !important;
                                }
                                ha-markdown.no-header {
                                  padding: 0px 8px;      
                                }
                          - type: entities
                            entities:
                              - entity: sensor.guest_battery
                                name: Ecobee - Theater
                              - entity: sensor.front_living_rm_battery
                                name: Ecobee - Front Living Room
                              - entity: sensor.master_battery
                                name: Ecobee - Master
                              - entity: sensor.family_room_battery
                                name: Ecobee - Family Room
                              - entity: sensor.office_battery
                                name: Ecobee - Office
                              - entity: sensor.kitchen_battery
                                name: Ecobee - Guest Room
                              - entity: sensor.cosmo_battery
                                name: Ecobee - cosmo Room
                              - entity: sensor.aqara_button_01_battery
                                name: Zigbee - Office Button 1
                              - entity: sensor.aqara_button_02_battery
                                name: Zigbee - Office Button 2
                              - entity: sensor.lumi_lumi_sensor_magnet_aq2_battery
                                name: Zigbee - Theater Door
                              - entity: sensor.aqara_motion_battery
                                name: Zigbee - Kitchen Motion
                              - entity: sensor.front_door_lock_battery
                                name: Zigbee - Front Door Lock
                              - entity: sensor.rear_door_lock_battery
                                name: Zigbee - Rear Door Lock
                              - entity: sensor.george_room_door_battery_level
                                name: Z-Wave - george Door
                              - entity: sensor.sprinkler_faucet_battery_level
                                name: Sprinkler - Rear
                            state_color: true
                            show_header_toggle: false
                            card_mod:
                              style: |
                                ha-card {
                                  border-radius: 12px;
                                  font-family: var(--primary-font-family) !important;
                                }
                        columns: 1
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#presence-card'
                        bg_opacity: 76
                        shadow_opacity: 0
                        hide_backdrop: true
                      - square: false
                        type: grid
                        cards:
                          - square: false
                            type: grid
                            cards:
                              - type: custom:decluttering-card
                                template: person_card_new
                                variables:
                                  - person: jerry
                                  - work_icon: mdi:car
                                  - entity_picture: /local/lovelace/jerry.jpg
                                  - show_entity_picture: true
                                  - tap_action:
                                      action: more-info
                                      haptic: light
                              - type: custom:decluttering-card
                                template: person_card_new
                                variables:
                                  - person: elaine
                                  - work_icon: mdi:car
                                  - entity_picture: /local/lovelace/elaine.jpg
                                  - show_entity_picture: true
                                  - tap_action:
                                      action: more-info
                                      haptic: light
                              - type: custom:decluttering-card
                                template: person_card_new
                                variables:
                                  - person: george
                                  - work_icon: mdi:car
                                  - entity_picture: /local/lovelace/george.jpg
                                  - show_entity_picture: true
                                  - tap_action:
                                      action: more-info
                                      haptic: light
                              - type: custom:decluttering-card
                                template: person_card_new
                                variables:
                                  - person: cosmo
                                  - work_icon: mdi:car
                                  - entity_picture: /local/lovelace/cosmo.jpg
                                  - show_entity_picture: true
                                  - tap_action:
                                      action: more-info
                                      haptic: light
                            columns: 2
                          - type: map
                            entities:
                              - zone.home
                              - entity: person.jerry
                                name: jerry
                              - entity: person.elaine
                                name: elaine
                              - entity: person.george
                                name: george
                              - entity: person.cosmo
                                name: cosmo
                            auto_fit: true
                            hours_to_show: 0
                            theme_mode: auto
                            card_mod:
                              style:
                                ha-map $ ha-entity-marker[entity-name='george'] $: |
                                  .marker {
                                    visibility: {% if is_state('person.george', 'home') %}hidden{% else %}visible{% endif %}
                                  }
                                ha-map $ ha-entity-marker[entity-name='elaine'] $: |
                                  .marker {
                                    visibility: {% if is_state('person.elaine', 'home') %}hidden{% else %}visible{% endif %}
                                  }
                                ha-map $ ha-entity-marker[entity-name='jerry'] $: |
                                  .marker {
                                    visibility: {% if is_state('person.jerry', 'home') %}hidden{% else %}visible{% endif %}
                                  }
                                ha-map $ ha-entity-marker[entity-name='cosmo'] $: |
                                  .marker {
                                    visibility: {% if is_state('person.cosmo', 'home') %}hidden{% else %}visible{% endif %}
                                  }
                        columns: 1
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#sports-card'
                        bg_opacity: 76
                        shadow_opacity: 0
                        hide_backdrop: true
                      - type: conditional
                        conditions:
                          - condition: state
                            entity: sensor.nba_phi_tracker
                            state_not: NOT_FOUND
                        card:
                          type: custom:teamtracker-card
                          entity: sensor.nba_phi_tracker
                          card_mod:
                            style: |
                              ha-card {
                                border: 1px solid rgba(0,0,0,0.1)!important;
                                box-shadow: 1px 1px 3px 0px rgba(0,0,0,0.2)!important;
                                font-size: 0.9em !important;
                                font-family: var(--primary-font-family) !important;
                              }
                              .name {
                                font-size: 1.1em !important;
                              }
                              .card {
                                padding-left: 10px !important;
                                padding-right: 10px !important;
                      - type: conditional
                        conditions:
                          - condition: state
                            entity: sensor.mlb_phi_tracker
                            state_not: NOT_FOUND
                        card:
                          type: custom:teamtracker-card
                          entity: sensor.mlb_phi_tracker
                          card_mod:
                            style: |
                              ha-card {
                                border: 1px solid rgba(0,0,0,0.1)!important;
                                box-shadow: 1px 1px 3px 0px rgba(0,0,0,0.2)!important;
                                font-size: 0.9em !important;
                                font-family: var(--primary-font-family) !important;
                              }
                              .name {
                                font-size: 1.1em !important;
                              }
                              .card {
                                padding-left: 10px !important;
                                padding-right: 10px !important;
                      - type: conditional
                        conditions:
                          - condition: state
                            entity: sensor.nfl_phi_tracker
                            state_not: NOT_FOUND
                        card:
                          type: custom:teamtracker-card
                          entity: sensor.nfl_phi_tracker
                          card_mod:
                            style: |
                              ha-card {
                                border: 1px solid rgba(0,0,0,0.1)!important;
                                box-shadow: 1px 1px 3px 0px rgba(0,0,0,0.2)!important;
                                font-size: 0.9em !important;
                                font-family: var(--primary-font-family) !important;
                              }
                              .name {
                                font-size: 1.1em !important;
                              }
                              .card {
                                padding-left: 10px !important;
                                padding-right: 10px !important;
                      - type: conditional
                        conditions:
                          - condition: state
                            entity: sensor.nfl_wsh_tracker
                            state_not: NOT_FOUND
                        card:
                          type: custom:teamtracker-card
                          entity: sensor.nfl_wsh_tracker
                          card_mod:
                            style: |
                              ha-card {
                                border: 1px solid rgba(0,0,0,0.1)!important;
                                box-shadow: 1px 1px 3px 0px rgba(0,0,0,0.2)!important;
                                font-size: 0.9em !important;
                                font-family: var(--primary-font-family) !important;
                              }
                              .name {
                                font-size: 1.1em !important;
                              }
                              .card {
                                padding-left: 10px !important;
                                padding-right: 10px !important;
                  - type: vertical-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: pop-up
                        hash: '#car-card'
                        bg_opacity: 75
                      - square: false
                        type: grid
                        cards:
                          - vehicle_image_type: url
                            status_image_type: none
                            layout_type: single
                            formatted_entities: true
                            show_location: true
                            show_mileage: true
                            show_car_state: true
                            show_info_icons: true
                            help_highlight: true
                            sections_order:
                              - title
                              - info_row_fgpmp7x
                              - image
                              - info
                              - info_row_amrsnxh
                              - icon_row_8woc2bi
                              - icon_row_028wvpe
                              - bar_0
                            bars: []
                            icon_rows:
                              - id: 8woc2bi
                                width: '100'
                                alignment: center
                                spacing: medium
                                columns: 0
                                icons:
                                  - entity: lock.jarvis_lock
                                    icon_inactive: mdi:lock
                                    icon_active: mdi:lock-open-variant
                                    color_inactive: var(--secondary-text-color)
                                    color_active: var(--primary-color)
                                    name_color_inactive: var(--primary-text-color)
                                    name_color_active: var(--primary-text-color)
                                    state_color_inactive: var(--secondary-text-color)
                                    state_color_active: var(--primary-text-color)
                                    inactive_state: 'off'
                                    active_state: 'on'
                                    inactive_template_mode: false
                                    active_template_mode: false
                                    inactive_template: ''
                                    active_template: ''
                                    active_state_text: ''
                                    inactive_state_text: ''
                                    show_state: true
                                    show_name: false
                                    show_name_active: false
                                    show_name_inactive: false
                                    show_state_active: true
                                    show_state_inactive: true
                                    show_units: true
                                    show_icon_active: true
                                    show_icon_inactive: true
                                    use_entity_color_for_icon: false
                                    use_entity_color_for_icon_active: false
                                    use_entity_color_for_icon_inactive: false
                                    use_entity_color_for_icon_background: false
                                    use_entity_color_for_container_background: false
                                    name: ''
                                    text_position: bottom
                                    vertical_alignment: center
                                    text_alignment: center
                                    icon_size: 24
                                    text_size: 14
                                    icon_background: none
                                    icon_background_color: var(--secondary-background-color)
                                    container_background: none
                                    container_background_color: var(--secondary-background-color)
                                    draggable: true
                                    action: ''
                                    service_data: {}
                                    on_click_action: trigger
                                  - entity: climate.jarvis_climate
                                    icon_inactive: mdi:fan-off
                                    icon_active: mdi:fan
                                    color_inactive: var(--secondary-text-color)
                                    color_active: var(--primary-color)
                                    name_color_inactive: var(--primary-text-color)
                                    name_color_active: var(--primary-text-color)
                                    state_color_inactive: var(--secondary-text-color)
                                    state_color_active: var(--primary-text-color)
                                    inactive_state: 'off'
                                    active_state: heat_cool
                                    inactive_template_mode: false
                                    active_template_mode: false
                                    inactive_template: ''
                                    active_template: ''
                                    active_state_text: 'On'
                                    inactive_state_text: ''
                                    show_state: true
                                    show_name: false
                                    show_name_active: false
                                    show_name_inactive: false
                                    show_state_active: true
                                    show_state_inactive: true
                                    show_units: true
                                    show_icon_active: true
                                    show_icon_inactive: true
                                    use_entity_color_for_icon: false
                                    use_entity_color_for_icon_active: false
                                    use_entity_color_for_icon_inactive: false
                                    use_entity_color_for_icon_background: false
                                    use_entity_color_for_container_background: false
                                    name: ''
                                    on_click_action: toggle
                                    text_position: bottom
                                    vertical_alignment: center
                                    text_alignment: center
                                    icon_size: 24
                                    text_size: 14
                                    icon_background: none
                                    icon_background_color: var(--secondary-background-color)
                                    container_background: none
                                    container_background_color: var(--secondary-background-color)
                                    draggable: true
                                    action: ''
                                    service_data: {}
                                  - entity: cover.jarvis_frunk
                                    icon_inactive: mdi:car-arrow-left
                                    icon_active: mdi:car-arrow-left
                                    color_inactive: var(--secondary-text-color)
                                    color_active: var(--primary-color)
                                    name_color_inactive: var(--primary-text-color)
                                    name_color_active: var(--primary-text-color)
                                    state_color_inactive: var(--secondary-text-color)
                                    state_color_active: var(--primary-text-color)
                                    inactive_state: 'off'
                                    active_state: 'on'
                                    inactive_template_mode: false
                                    active_template_mode: false
                                    inactive_template: ''
                                    active_template: ''
                                    active_state_text: Frunk Open
                                    inactive_state_text: Frunk Closed
                                    show_state: true
                                    show_name: false
                                    show_name_active: true
                                    show_name_inactive: true
                                    show_state_active: false
                                    show_state_inactive: false
                                    show_units: true
                                    show_icon_active: true
                                    show_icon_inactive: true
                                    use_entity_color_for_icon: false
                                    use_entity_color_for_icon_active: false
                                    use_entity_color_for_icon_inactive: false
                                    use_entity_color_for_icon_background: false
                                    use_entity_color_for_container_background: false
                                    on_click_action: trigger
                                    text_position: bottom
                                    vertical_alignment: center
                                    text_alignment: center
                                    icon_size: 24
                                    text_size: 14
                                    icon_background: none
                                    icon_background_color: var(--secondary-background-color)
                                    container_background: none
                                    container_background_color: var(--secondary-background-color)
                                    draggable: true
                                    action: ''
                                    service_data: {}
                                    name: Frunk
                                  - entity: cover.jarvis_trunk
                                    icon_inactive: mdi:car-arrow-right
                                    icon_active: mdi:car-arrow-right
                                    color_inactive: var(--secondary-text-color)
                                    color_active: var(--primary-color)
                                    name_color_inactive: var(--primary-text-color)
                                    name_color_active: var(--primary-text-color)
                                    state_color_inactive: var(--secondary-text-color)
                                    state_color_active: var(--primary-text-color)
                                    inactive_state: 'off'
                                    active_state: 'on'
                                    inactive_template_mode: false
                                    active_template_mode: false
                                    inactive_template: ''
                                    active_template: ''
                                    active_state_text: Trunk Open
                                    inactive_state_text: Trunk Closed
                                    show_state: true
                                    show_name: false
                                    show_name_active: true
                                    show_name_inactive: true
                                    show_state_active: false
                                    show_state_inactive: false
                                    show_units: true
                                    show_icon_active: true
                                    show_icon_inactive: true
                                    use_entity_color_for_icon: false
                                    use_entity_color_for_icon_active: false
                                    use_entity_color_for_icon_inactive: false
                                    use_entity_color_for_icon_background: false
                                    use_entity_color_for_container_background: false
                                    name: Trunk
                                    on_click_action: toggle
                                    text_position: bottom
                                    vertical_alignment: center
                                    text_alignment: center
                                    icon_size: 24
                                    text_size: 14
                                    icon_background: none
                                    icon_background_color: var(--secondary-background-color)
                                    container_background: none
                                    container_background_color: var(--secondary-background-color)
                                    draggable: true
                                    action: ''
                                    service_data: {}
                                confirmation_mode: false
                                row_name: ''
                                vertical_alignment: flex-start
                              - id: 028wvpe
                                width: '100'
                                alignment: center
                                vertical_alignment: flex-start
                                spacing: medium
                                columns: 0
                                icons:
                                  - entity: button.jarvis_honk_horn
                                    icon_inactive: mdi:bugle
                                    icon_active: mdi:bugle
                                    color_inactive: var(--secondary-text-color)
                                    color_active: var(--primary-color)
                                    name_color_inactive: var(--primary-text-color)
                                    name_color_active: var(--primary-text-color)
                                    state_color_inactive: var(--secondary-text-color)
                                    state_color_active: var(--primary-text-color)
                                    inactive_state: 'off'
                                    active_state: 'on'
                                    inactive_template_mode: false
                                    active_template_mode: false
                                    inactive_template: ''
                                    active_template: ''
                                    active_state_text: ''
                                    inactive_state_text: ''
                                    show_state: true
                                    show_name: false
                                    show_name_active: true
                                    show_name_inactive: true
                                    show_state_active: false
                                    show_state_inactive: false
                                    show_units: true
                                    show_icon_active: true
                                    show_icon_inactive: true
                                    use_entity_color_for_icon: false
                                    use_entity_color_for_icon_active: false
                                    use_entity_color_for_icon_inactive: false
                                    use_entity_color_for_icon_background: false
                                    use_entity_color_for_container_background: false
                                    name: Horn
                                    on_click_action: trigger
                                    text_position: bottom
                                    vertical_alignment: center
                                    text_alignment: center
                                    icon_size: 24
                                    text_size: 14
                                    icon_background: none
                                    icon_background_color: var(--secondary-background-color)
                                    container_background: none
                                    container_background_color: var(--secondary-background-color)
                                    draggable: true
                                    action: ''
                                    service_data: {}
                                  - entity: button.jarvis_flash_lights
                                    icon_inactive: mdi:car-parking-lights
                                    icon_active: mdi:car-parking-lights
                                    color_inactive: var(--secondary-text-color)
                                    color_active: var(--primary-color)
                                    name_color_inactive: var(--primary-text-color)
                                    name_color_active: var(--primary-text-color)
                                    state_color_inactive: var(--secondary-text-color)
                                    state_color_active: var(--primary-text-color)
                                    inactive_state: 'off'
                                    active_state: 'on'
                                    inactive_template_mode: false
                                    active_template_mode: false
                                    inactive_template: ''
                                    active_template: ''
                                    active_state_text: ''
                                    inactive_state_text: ''
                                    show_state: true
                                    show_name: false
                                    show_name_active: true
                                    show_name_inactive: true
                                    show_state_active: false
                                    show_state_inactive: false
                                    show_units: true
                                    show_icon_active: true
                                    show_icon_inactive: true
                                    use_entity_color_for_icon: false
                                    use_entity_color_for_icon_active: false
                                    use_entity_color_for_icon_inactive: false
                                    use_entity_color_for_icon_background: false
                                    use_entity_color_for_container_background: false
                                    name: Flash Lights
                                    on_click_action: trigger
                                    text_position: bottom
                                    vertical_alignment: center
                                    text_alignment: center
                                    icon_size: 24
                                    text_size: 14
                                    icon_background: none
                                    icon_background_color: var(--secondary-background-color)
                                    container_background: none
                                    container_background_color: var(--secondary-background-color)
                                    draggable: true
                                    action: ''
                                    service_data: {}
                                  - entity: cover.jarvis_vent_windows
                                    icon_inactive: mdi:car-door
                                    icon_active: mdi:car-door
                                    color_inactive: var(--secondary-text-color)
                                    color_active: var(--primary-color)
                                    name_color_inactive: var(--primary-text-color)
                                    name_color_active: var(--primary-text-color)
                                    state_color_inactive: var(--secondary-text-color)
                                    state_color_active: var(--primary-text-color)
                                    inactive_state: 'off'
                                    active_state: 'on'
                                    inactive_template_mode: false
                                    active_template_mode: false
                                    inactive_template: ''
                                    active_template: ''
                                    active_state_text: ''
                                    inactive_state_text: ''
                                    show_state: true
                                    show_name: false
                                    show_name_active: true
                                    show_name_inactive: true
                                    show_state_active: false
                                    show_state_inactive: false
                                    show_units: true
                                    show_icon_active: true
                                    show_icon_inactive: true
                                    use_entity_color_for_icon: false
                                    use_entity_color_for_icon_active: false
                                    use_entity_color_for_icon_inactive: false
                                    use_entity_color_for_icon_background: false
                                    use_entity_color_for_container_background: false
                                    on_click_action: toggle
                                    text_position: bottom
                                    vertical_alignment: center
                                    text_alignment: center
                                    icon_size: 24
                                    text_size: 14
                                    icon_background: none
                                    icon_background_color: var(--secondary-background-color)
                                    container_background: none
                                    container_background_color: var(--secondary-background-color)
                                    draggable: true
                                    action: ''
                                    service_data: {}
                                    name: Vent
                                  - entity: button.jarvis_play_fart
                                    icon_inactive: mdi:weather-windy
                                    icon_active: mdi:weather-windy
                                    color_inactive: var(--secondary-text-color)
                                    color_active: var(--primary-color)
                                    name_color_inactive: var(--primary-text-color)
                                    name_color_active: var(--primary-text-color)
                                    state_color_inactive: var(--secondary-text-color)
                                    state_color_active: var(--primary-text-color)
                                    inactive_state: 'off'
                                    active_state: 'on'
                                    inactive_template_mode: false
                                    active_template_mode: false
                                    inactive_template: ''
                                    active_template: ''
                                    active_state_text: ''
                                    inactive_state_text: ''
                                    show_state: true
                                    show_name: false
                                    show_name_active: true
                                    show_name_inactive: true
                                    show_state_active: false
                                    show_state_inactive: false
                                    show_units: true
                                    show_icon_active: true
                                    show_icon_inactive: true
                                    use_entity_color_for_icon: false
                                    use_entity_color_for_icon_active: false
                                    use_entity_color_for_icon_inactive: false
                                    use_entity_color_for_icon_background: false
                                    use_entity_color_for_container_background: false
                                    name: Fart
                                    on_click_action: trigger
                                    text_position: bottom
                                    vertical_alignment: center
                                    text_alignment: center
                                    icon_size: 24
                                    text_size: 14
                                    icon_background: none
                                    icon_background_color: var(--secondary-background-color)
                                    container_background: none
                                    container_background_color: var(--secondary-background-color)
                                    draggable: true
                                    action: ''
                                    service_data: {}
                                confirmation_mode: false
                                row_name: ''
                            type: custom:ultra-vehicle-card
                            title: Jarvis
                            title_alignment: center
                            title_size: 22
                            show_units: true
                            vehicle_image_width: 100
                            action_image_width: 100
                            action_image_priority: priority
                            info_rows:
                              - id: fgpmp7x
                                width: '100'
                                alignment: center
                                vertical_alignment: center
                                spacing: none
                                columns: 0
                                allow_wrap: true
                                info_entities:
                                  - id: dd2xn7z
                                    entity: sensor.jarvis_battery_level
                                    name: ''
                                    icon: mdi:battery
                                    show_icon: true
                                    show_name: false
                                    text_size: 14
                                    name_size: 14
                                    icon_size: 24
                                    icon_color: var(--secondary-text-color)
                                    text_color: var(--primary-text-color)
                                    on_click_action: more-info
                                  - id: z5bdgu6
                                    entity: binary_sensor.jarvis_charge_cable
                                    name: ''
                                    icon: mdi:power-plug
                                    show_icon: true
                                    show_name: false
                                    text_size: 14
                                    name_size: 14
                                    icon_size: 24
                                    icon_color: var(--secondary-text-color)
                                    text_color: var(--primary-text-color)
                                    on_click_action: more-info
                                  - id: 05uuyjv
                                    entity: binary_sensor.jarvis_charging
                                    name: ''
                                    icon: mdi:battery-charging
                                    show_icon: true
                                    show_name: false
                                    text_size: 14
                                    name_size: 14
                                    icon_size: 24
                                    icon_color: var(--secondary-text-color)
                                    text_color: var(--primary-text-color)
                                    on_click_action: more-info
                                row_name: Charge
                              - id: amrsnxh
                                width: '100'
                                vertical_alignment: flex-start
                                spacing: none
                                columns: 0
                                allow_wrap: true
                                info_entities:
                                  - id: ou0m8ai
                                    entity: sensor.jarvis_shift_state
                                    name: ''
                                    icon: ''
                                    show_icon: false
                                    show_name: false
                                    text_size: 15
                                    name_size: 14
                                    icon_size: 24
                                    icon_color: var(--secondary-text-color)
                                    text_color: var(--primary-text-color)
                                    on_click_action: none
                                    template_mode: true
                                    value_template: >-
                                      {% if
                                      states('sensor.jarvis_tessie_location') !=
                                      'None' %}
                                        {% set address = states('sensor.jarvis_tessie_location') %}
                                      {% else %}
                                        {% set address = state_attr('sensor.jarvis_tessie_location','address').split(',') %}
                                        {% set address = address[0] + ',' + address[1] + ' ' + address[2].strip()[:2].upper() %}
                                      {%- endif %}

                                      {% if states('sensor.jarvis_shift_state')
                                      == 'p' %}
                                          Parked at {{ address }} {{ (states.sensor.jarvis_shift_state.last_updated | as_local).strftime('since %b %d at %I:%M%p') }}
                                      {% elif
                                      states('sensor.jarvis_shift_state') == 'r'
                                      %}
                                        Reversing near {{ address }}
                                      {% elif
                                      states('sensor.jarvis_shift_state') == 'd'
                                      %}
                                        Driving near {{ address }}
                                      {% elif
                                      states('sensor.jarvis_shift_state') == 'n'
                                      %}
                                        In neutral at {{ address }}
                                      {%- endif %}
                                row_name: Location
                                alignment: flex-start
                            section_styles:
                              title:
                                marginBottom: -15
                              info_row_amrsnxh:
                                marginTop: -25
                              image:
                                marginTop: -35
                            images:
                              - id: f0ti458
                                name: Charging
                                image_type: url
                                image_width: 100
                                priority: 0
                                image: /local/lovelace/jarvis/jarvis_closed_z.png
                                conditional_type: show
                                conditional_state: charging
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') !=
                                  'disconnected' and 
                                  states('cover.jarvis_frunk') == 'closed' and

                                  states('cover.jarvis_trunk') == 'closed'

                                  }}
                              - id: g21ud3j
                                name: Frunk
                                image_type: url
                                image_width: 100
                                priority: 0
                                image: /local/lovelace/jarvis/jarvis_frunk.png
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') ==
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'open' and

                                  states('cover.jarvis_trunk') == 'closed'

                                  }}
                              - id: gc8pr4c
                                name: Trunk
                                image_type: url
                                image_width: 100
                                priority: 0
                                image: /local/lovelace/jarvis/jarvis_trunk.png
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') ==
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'closed' and

                                  states('cover.jarvis_trunk') == 'open'

                                  }}
                              - id: oqa2g33
                                name: Frunk Trunk
                                image_type: url
                                image_width: 100
                                priority: 0
                                image: /local/lovelace/jarvis/jarvis_frunk_trunk.png
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') ==
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'open' and

                                  states('cover.jarvis_trunk') == 'open'

                                  }}
                              - id: hjeoa3x
                                name: Frunk Charging
                                image_type: url
                                image_width: 100
                                priority: 0
                                image: /local/lovelace/jarvis/jarvis_frunk_z.png
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') !=
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'open' and

                                  states('cover.jarvis_trunk') == 'closed'

                                  }}
                              - id: 1rzmchm
                                name: Trunk Charging
                                image_type: url
                                image_width: 100
                                priority: 0
                                image: /local/lovelace/jarvis/jarvis_trunk_z.png
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') !=
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'closed' and

                                  states('cover.jarvis_trunk') == 'open'

                                  }}
                              - id: 79jamku
                                name: Frunk Trunk Charging
                                image_type: url
                                image_width: 100
                                priority: 0
                                image: >-
                                  /local/lovelace/jarvis/jarvis_frunk_trunk_z.png
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') !=
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'open' and

                                  states('cover.jarvis_trunk') == 'open'

                                  }}
                              - name: Jarvis
                                image_type: url
                                image: /local/lovelace/jarvis/jarvis_closed.png
                                image_width: 100
                                image_crop:
                                  top: 0
                                  right: 0
                                  bottom: 0
                                  left: 0
                                priority: 0
                                id: cnekyij
                            image_priority_mode: order
                            action_images:
                              - id: image_1751552233491
                                entity: ''
                                state: ''
                                image_type: url
                                priority: 0
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') !=
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'open' and

                                  states('cover.jarvis_trunk') == 'open'

                                  }}
                                image: >-
                                  /local/lovelace/jarvis/jarvis_frunk_trunk_z.png
                              - id: image_1751552348013
                                entity: ''
                                state: ''
                                image_type: url
                                priority: 0
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') !=
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'closed' and

                                  states('cover.jarvis_trunk') == 'open'

                                  }}
                                image: /local/lovelace/jarvis/jarvis_trunk_z.png
                              - id: image_1751552429029
                                entity: ''
                                state: ''
                                image_type: url
                                priority: 0
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') !=
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'open' and

                                  states('cover.jarvis_trunk') == 'closed'

                                  }}
                                image: /local/lovelace/jarvis/jarvis_frunk_z.png
                              - id: image_1751552811346
                                entity: ''
                                state: ''
                                image_type: url
                                priority: 0
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') ==
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'open' and

                                  states('cover.jarvis_trunk') == 'open'

                                  }}
                                image: /local/lovelace/jarvis/jarvis_frunk_trunk.png
                              - id: image_1751552695059
                                entity: ''
                                state: ''
                                image_type: url
                                priority: 0
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') ==
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'closed' and

                                  states('cover.jarvis_trunk') == 'open'

                                  }}
                                image: /local/lovelace/jarvis/jarvis_trunk.png
                              - id: image_1751552571795
                                entity: ''
                                state: ''
                                image_type: url
                                priority: 0
                                template_mode: true
                                template: >-
                                  {{ states('sensor.jarvis_charging') ==
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'open' and

                                  states('cover.jarvis_trunk') == 'closed'

                                  }}
                                image: /local/lovelace/jarvis/jarvis_frunk.png
                              - id: image_1751551919521
                                entity: ''
                                state: ''
                                image_type: url
                                priority: 0
                                template_mode: true
                                image: /local/lovelace/jarvis/jarvis_closed_z.png
                                template: >-
                                  {{ states('sensor.jarvis_charging') !=
                                  'disconnected' and 

                                  states('cover.jarvis_frunk') == 'closed' and

                                  states('cover.jarvis_trunk') == 'closed'

                                  }}
                            vehicle_image: /local/lovelace/jarvis/jarvis_closed.png
                        columns: 1
                columns: 1
    type: masonry
